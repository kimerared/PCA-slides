<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Principal Component Analysis - 5&nbsp; Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./results.html" rel="next">
<link href="./dataset.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./analysis.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Analysis</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Principal Component Analysis</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./methods.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Methods</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Examples</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dataset.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Dataset</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analysis.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./results.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Results</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discussion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Discussion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">References</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link active" data-scroll-target="#data-preparation"><span class="header-section-number">5.1</span> Data Preparation</a></li>
  <li><a href="#assumptions" id="toc-assumptions" class="nav-link" data-scroll-target="#assumptions"><span class="header-section-number">5.2</span> Assumptions</a></li>
  <li><a href="#feature-scaling" id="toc-feature-scaling" class="nav-link" data-scroll-target="#feature-scaling"><span class="header-section-number">5.3</span> Feature Scaling</a>
  <ul class="collapse">
  <li><a href="#standardization" id="toc-standardization" class="nav-link" data-scroll-target="#standardization"><span class="header-section-number">5.3.1</span> Standardization</a></li>
  </ul></li>
  <li><a href="#pca-requirements" id="toc-pca-requirements" class="nav-link" data-scroll-target="#pca-requirements"><span class="header-section-number">5.4</span> PCA Requirements</a>
  <ul class="collapse">
  <li><a href="#outliers-detection" id="toc-outliers-detection" class="nav-link" data-scroll-target="#outliers-detection"><span class="header-section-number">5.4.1</span> Outliers Detection</a></li>
  <li><a href="#leverage" id="toc-leverage" class="nav-link" data-scroll-target="#leverage"><span class="header-section-number">5.4.2</span> Leverage</a></li>
  <li><a href="#removing-outliers" id="toc-removing-outliers" class="nav-link" data-scroll-target="#removing-outliers"><span class="header-section-number">5.4.3</span> Removing Outliers</a></li>
  <li><a href="#correlations" id="toc-correlations" class="nav-link" data-scroll-target="#correlations"><span class="header-section-number">5.4.4</span> Correlations</a></li>
  </ul></li>
  <li><a href="#full-model-regression" id="toc-full-model-regression" class="nav-link" data-scroll-target="#full-model-regression"><span class="header-section-number">5.5</span> Full Model Regression</a></li>
  <li><a href="#pca-implementation" id="toc-pca-implementation" class="nav-link" data-scroll-target="#pca-implementation"><span class="header-section-number">5.6</span> PCA Implementation</a>
  <ul class="collapse">
  <li><a href="#svd---singular-value-decomposition" id="toc-svd---singular-value-decomposition" class="nav-link" data-scroll-target="#svd---singular-value-decomposition"><span class="header-section-number">5.6.1</span> SVD - Singular Value Decomposition</a></li>
  <li><a href="#pca---elements" id="toc-pca---elements" class="nav-link" data-scroll-target="#pca---elements"><span class="header-section-number">5.6.2</span> PCA - Elements</a></li>
  <li><a href="#loadings-of-first-two-components" id="toc-loadings-of-first-two-components" class="nav-link" data-scroll-target="#loadings-of-first-two-components"><span class="header-section-number">5.6.3</span> Loadings of First Two Components</a></li>
  <li><a href="#pca---cumulative-variance" id="toc-pca---cumulative-variance" class="nav-link" data-scroll-target="#pca---cumulative-variance"><span class="header-section-number">5.6.4</span> PCA - Cumulative Variance</a></li>
  <li><a href="#pca---number-of-principal-components" id="toc-pca---number-of-principal-components" class="nav-link" data-scroll-target="#pca---number-of-principal-components"><span class="header-section-number">5.6.5</span> PCA - Number of Principal Components</a></li>
  </ul></li>
  <li><a href="#visualization" id="toc-visualization" class="nav-link" data-scroll-target="#visualization"><span class="header-section-number">5.7</span> Visualization</a>
  <ul class="collapse">
  <li><a href="#scree-plot---cumulative-variance-explained" id="toc-scree-plot---cumulative-variance-explained" class="nav-link" data-scroll-target="#scree-plot---cumulative-variance-explained"><span class="header-section-number">5.7.1</span> Scree Plot - Cumulative Variance Explained</a></li>
  <li><a href="#biplot" id="toc-biplot" class="nav-link" data-scroll-target="#biplot"><span class="header-section-number">5.7.2</span> Biplot</a></li>
  <li><a href="#correlation-circle" id="toc-correlation-circle" class="nav-link" data-scroll-target="#correlation-circle"><span class="header-section-number">5.7.3</span> Correlation Circle</a></li>
  <li><a href="#variable-contribution" id="toc-variable-contribution" class="nav-link" data-scroll-target="#variable-contribution"><span class="header-section-number">5.7.4</span> Variable Contribution</a></li>
  </ul></li>
  <li><a href="#model-building" id="toc-model-building" class="nav-link" data-scroll-target="#model-building"><span class="header-section-number">5.8</span> Model Building</a>
  <ul class="collapse">
  <li><a href="#data-splitting-into-training-test-set" id="toc-data-splitting-into-training-test-set" class="nav-link" data-scroll-target="#data-splitting-into-training-test-set"><span class="header-section-number">5.8.1</span> Data Splitting into Training &amp; Test set</a></li>
  <li><a href="#feature-scaling-standardization" id="toc-feature-scaling-standardization" class="nav-link" data-scroll-target="#feature-scaling-standardization"><span class="header-section-number">5.8.2</span> Feature Scaling: Standardization</a></li>
  <li><a href="#applying-pca-to-training-test-sets" id="toc-applying-pca-to-training-test-sets" class="nav-link" data-scroll-target="#applying-pca-to-training-test-sets"><span class="header-section-number">5.8.3</span> Applying PCA to Training &amp; Test sets</a></li>
  </ul></li>
  <li><a href="#pca-full-model-8-principal-components" id="toc-pca-full-model-8-principal-components" class="nav-link" data-scroll-target="#pca-full-model-8-principal-components"><span class="header-section-number">5.9</span> PCA Full Model: 8 Principal Components</a>
  <ul class="collapse">
  <li><a href="#visualization-of-uncorrelated-pca-matrix" id="toc-visualization-of-uncorrelated-pca-matrix" class="nav-link" data-scroll-target="#visualization-of-uncorrelated-pca-matrix"><span class="header-section-number">5.9.1</span> Visualization of Uncorrelated PCA Matrix</a></li>
  </ul></li>
  <li><a href="#pca-2-principal-components" id="toc-pca-2-principal-components" class="nav-link" data-scroll-target="#pca-2-principal-components"><span class="header-section-number">5.10</span> PCA: 2 Principal Components</a>
  <ul class="collapse">
  <li><a href="#principal-components-regression" id="toc-principal-components-regression" class="nav-link" data-scroll-target="#principal-components-regression"><span class="header-section-number">5.10.1</span> <strong>Principal Components Regression</strong></a></li>
  <li><a href="#pca-cross-validation-model" id="toc-pca-cross-validation-model" class="nav-link" data-scroll-target="#pca-cross-validation-model"><span class="header-section-number">5.10.2</span> PCA: Cross-Validation Model</a></li>
  </ul></li>
  <li><a href="#predictions" id="toc-predictions" class="nav-link" data-scroll-target="#predictions"><span class="header-section-number">5.11</span> Predictions</a>
  <ul class="collapse">
  <li><a href="#prediction-metrics" id="toc-prediction-metrics" class="nav-link" data-scroll-target="#prediction-metrics"><span class="header-section-number">5.11.1</span> Prediction Metrics</a></li>
  </ul></li>
  <li><a href="#training-conclusion" id="toc-training-conclusion" class="nav-link" data-scroll-target="#training-conclusion"><span class="header-section-number">5.12</span> Training Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Analysis</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="data-preparation" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="data-preparation"><span class="header-section-number">5.1</span> Data Preparation</h2>
<p>This analysis uses the Dialysis dataset introduced previously in the Dataset chapter. Within this context, we restructured the variables, enhancing their meaningfulness and facilitating inferential analysis. Additionally, the mean imputation approach addressed missing values.</p>
</section>
<section id="assumptions" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="assumptions"><span class="header-section-number">5.2</span> Assumptions</h2>
<p>PCA relies on certain assumptions, the fulfillment of which is essential for the validity of this technique.</p>
<ul>
<li><p><strong>Linearity</strong>: PCA assumes that the dataset is a linear combination of the variables. The variables exhibit relationships among themselves <span class="citation" data-cites="chumney2012pcaefa"><a href="references.html#ref-chumney2012pcaefa" role="doc-biblioref">[1]</a></span>.</p></li>
<li><p><strong>Importance of mean and covariance</strong>: PCA assumes that the directions of maximum variance will contain good features for discrimination.</p></li>
<li><p><strong>Correlation between features</strong>: PCA assumes a correlation between features.</p></li>
<li><p><strong>Normalization of data</strong>: Normalization of data is necessary to apply PCA. Unscaled data can cause relative comparison problems of the dataset <span class="citation" data-cites="chumney2012pcaefa"><a href="references.html#ref-chumney2012pcaefa" role="doc-biblioref">[1]</a></span>. In addition, the data should contain no significant outliers.</p></li>
<li><p><strong>Orthogonality</strong>: The principal components are orthogonal to each other.</p></li>
<li><p><strong>Sampling adequacy</strong>: PCA assumes that there is sampling adequacy.</p></li>
</ul>
</section>
<section id="feature-scaling" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="feature-scaling"><span class="header-section-number">5.3</span> Feature Scaling</h2>
<section id="standardization" class="level3" data-number="5.3.1">
<h3 data-number="5.3.1" class="anchored" data-anchor-id="standardization"><span class="header-section-number">5.3.1</span> Standardization</h3>
<p>It is important to Mean-Center the data prior to PCA model building to ensure the first Principal Component is in the direction of maximum variance.</p>
<ul>
<li><p>Standardization produces Mean, <span class="math inline">\(\mu\)</span>= 0, and Variance, <span class="math inline">\(\sigma\)</span> = 1.</p></li>
<li><p>We can rewrite this as:</p>
<p><span class="math display">\[
Z = \frac{{x - \mu}}{{\sigma}}
\]</span></p></li>
<li><p><span class="math display">\[
Z \sim N(0,1)
\]</span></p></li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the index position of the target feature </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>target_name <span class="ot">&lt;-</span> <span class="st">"expected_survival"</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>target_index <span class="ot">&lt;-</span> <span class="fu">grep</span>(target_name, </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">colnames</span>(train_data))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardization Numerical Features</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>train_data_sc <span class="ot">&lt;-</span> <span class="fu">scale</span>(train_data[, <span class="sc">-</span>target_index])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="pca-requirements" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="pca-requirements"><span class="header-section-number">5.4</span> PCA Requirements</h2>
<section id="outliers-detection" class="level3" data-number="5.4.1">
<h3 data-number="5.4.1" class="anchored" data-anchor-id="outliers-detection"><span class="header-section-number">5.4.1</span> Outliers Detection</h3>
<ul>
<li>There are some outliers in the data frame including the dependent variable.</li>
<li>However, there are three outliers with no high leverage.</li>
<li>Outliers are important because these can have a disproportionate influence on results.</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot a boxplot to visualize potential outliers</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(train_data, <span class="at">main =</span> <span class="st">"Outliers Detection"</span>,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="st">"steelblue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dependent Variable outliers</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>train_data <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y=</span>expected_survival)) <span class="sc">+</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill=</span><span class="st">"steelblue"</span>, <span class="at">alpha=</span><span class="fl">0.75</span>) <span class="sc">+</span> </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Expected Survival"</span>)<span class="sc">+</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Dependent Variable Outliers"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="leverage" class="level3" data-number="5.4.2">
<h3 data-number="5.4.2" class="anchored" data-anchor-id="leverage"><span class="header-section-number">5.4.2</span> Leverage</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(my_seed)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit regression model</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>ordinary_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(expected_survival <span class="sc">~</span> ., <span class="at">data =</span> train_data)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the model summary</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ordinary_model)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Residual Diagnostics</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ols_plot_resid_lev</span>(ordinary_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="removing-outliers" class="level3" data-number="5.4.3">
<h3 data-number="5.4.3" class="anchored" data-anchor-id="removing-outliers"><span class="header-section-number">5.4.3</span> Removing Outliers</h3>
<p>After removing one outlier from the dataset, we discovered that the final results produced minimal variability. Therefore, we decided to present a model that captures all the data points’ information; thus, no observations will be removed from the final model.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># No Outliers subset</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>no_outliers_df <span class="ot">&lt;-</span> <span class="fu">slice</span>(train_data, <span class="sc">-</span><span class="fu">c</span>(<span class="dv">56</span>))</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(my_seed)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit regression model</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>no_outliers_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(expected_survival <span class="sc">~</span> ., <span class="at">data =</span> no_outliers_df)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the model summary</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(no_outliers_model)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Residual Diagnostics</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ols_plot_resid_lev</span>(no_outliers_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="correlations" class="level3" data-number="5.4.4">
<h3 data-number="5.4.4" class="anchored" data-anchor-id="correlations"><span class="header-section-number">5.4.4</span> Correlations</h3>
<ul>
<li><p>Multicollinearity is present in the data set.</p></li>
<li><p>Correlated features were identified using a threshold = 0.30.</p></li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate correlations and round to 2 digits</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>corr_matrix <span class="ot">&lt;-</span> <span class="fu">cor</span>(train_data_sc)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>corr_matrix <span class="ot">&lt;-</span> <span class="fu">round</span>(corr_matrix, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Print names of highly correlated features; threshold &gt; 0.30</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>high <span class="ot">&lt;-</span> <span class="fu">findCorrelation</span>(corr_matrix, <span class="at">cutoff =</span> <span class="fl">0.30</span>, <span class="at">names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame with an index column</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>high_corr_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">Count =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(high),</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">Feature =</span> high</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co"># table format</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(high_corr_df, <span class="at">caption =</span> <span class="st">"Highly Correlated Features"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>(<span class="st">"hover"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-paper lightable-hover table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Highly Correlated Features</caption>
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">Count</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Feature</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">expected_transfusion</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">better_infection</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">expected_hospitalization</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">expected_hospital_readmission</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">expected_fistula</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;">prevalent_transplant_waitlist_expected</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td style="text-align: left;">incident_transplant_waitlist_expected</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: left;">expected_infection</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td style="text-align: left;">worse_survival</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: left;">incident_transplant_waitlist_better</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11</td>
<td style="text-align: left;">better_hospital_readmission</td>
</tr>
<tr class="even">
<td style="text-align: right;">12</td>
<td style="text-align: left;">worse_transfusion</td>
</tr>
<tr class="odd">
<td style="text-align: right;">13</td>
<td style="text-align: left;">worse_hospital_readmission</td>
</tr>
<tr class="even">
<td style="text-align: right;">14</td>
<td style="text-align: left;">worse_fistula</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15</td>
<td style="text-align: left;">incident_transplant_waitlist_worse</td>
</tr>
<tr class="even">
<td style="text-align: right;">16</td>
<td style="text-align: left;">better_fistula</td>
</tr>
<tr class="odd">
<td style="text-align: right;">17</td>
<td style="text-align: left;">prevalent_transplant_waitlist_better</td>
</tr>
<tr class="even">
<td style="text-align: right;">18</td>
<td style="text-align: left;">better_survival</td>
</tr>
<tr class="odd">
<td style="text-align: right;">19</td>
<td style="text-align: left;">worse_infection</td>
</tr>
<tr class="even">
<td style="text-align: right;">20</td>
<td style="text-align: left;">phosphorus (5.6 - 7) Mg</td>
</tr>
<tr class="odd">
<td style="text-align: right;">21</td>
<td style="text-align: left;">prevalent_transplant_waitlist_worse</td>
</tr>
<tr class="even">
<td style="text-align: right;">22</td>
<td style="text-align: left;">phosphorus (3.5 - 4.5) Mg</td>
</tr>
<tr class="odd">
<td style="text-align: right;">23</td>
<td style="text-align: left;">phosphorus &gt; 7Mg</td>
</tr>
<tr class="even">
<td style="text-align: right;">24</td>
<td style="text-align: left;">better_transfusion</td>
</tr>
<tr class="odd">
<td style="text-align: right;">25</td>
<td style="text-align: left;">Hgb 10g</td>
</tr>
<tr class="even">
<td style="text-align: right;">26</td>
<td style="text-align: left;">hypercalcemia_calcium &gt; 10.2Mg</td>
</tr>
<tr class="odd">
<td style="text-align: right;">27</td>
<td style="text-align: left;">pediatric_nPCR</td>
</tr>
<tr class="even">
<td style="text-align: right;">28</td>
<td style="text-align: left;">long_term_catheter</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
</section>
<section id="full-model-regression" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="full-model-regression"><span class="header-section-number">5.5</span> Full Model Regression</h2>
<ul>
<li>The Adjusted <span class="math inline">\(R^2\)</span> = 99.99% is an indication of over-fitting, or bias.</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(my_seed)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a multiple linear regression model</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>full_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(expected_survival <span class="sc">~</span> ., <span class="at">data =</span> train_data)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Print a summary of the regression model</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="fu">tab_model</span>(full_model, <span class="at">title =</span> <span class="st">"Full Model Regression"</span>, </span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">string.p=</span><span class="st">"P-value"</span>, <span class="at">string.stat =</span> <span class="st">"T-score"</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">string.se =</span> <span class="st">"Std. Error"</span>,</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">string.resp =</span> <span class="st">"Response"</span>,</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">string.ci =</span> <span class="st">"Conf Int."</span>,</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">show.se=</span>T, <span class="at">show.stat =</span> T,</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">CSS =</span> <span class="fu">list</span>(</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">css.depvarhead =</span> <span class="st">'font-weight: bold; text-align: left;'</span>,</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">css.summary =</span> <span class="st">'color: #10759B; font-weight: bold;'</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>           ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Full Model Regression</caption>
<colgroup>
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
</colgroup>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: italic; font-weight: normal; padding: 0.2cm; border-bottom: 1px solid black;">&nbsp;</td>
<td colspan="5" data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: italic; font-weight: normal; padding: 0.2cm; border-bottom: 1px solid black;">expected_survival</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; border-bottom: 1px solid black;">Predictors</td>
<td style="text-align: left; font-weight: bold; border-bottom: 1px solid black;">Estimates</td>
<td style="text-align: left; font-weight: bold; border-bottom: 1px solid black;">Std. Error</td>
<td style="text-align: left; font-weight: bold; border-bottom: 1px solid black;">Conf Int.</td>
<td style="text-align: left; font-weight: bold; border-bottom: 1px solid black;">T-score</td>
<td style="text-align: left; font-weight: bold; border-bottom: 1px solid black;">P-value</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">(Intercept)</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">93.71</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">41.88</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">5.73&nbsp;–&nbsp;181.69</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">2.24</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.038</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">better transfusion</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1.04</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.75</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.53&nbsp;–&nbsp;2.62</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1.39</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.181</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">expected transfusion</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.03</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.07&nbsp;–&nbsp;0.07</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.03</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.974</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">worse transfusion</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.13</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.08</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.03&nbsp;–&nbsp;0.29</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1.76</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.096</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">better infection</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.27</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.09</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.46&nbsp;–&nbsp;-0.07</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-2.92</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.009</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">expected infection</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.04</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.06</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.17&nbsp;–&nbsp;0.09</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.57</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.574</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">worse infection</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.11</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.27</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.68&nbsp;–&nbsp;0.46</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.41</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.687</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Kt v 1 2</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.25</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.25</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.28&nbsp;–&nbsp;0.78</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.99</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.335</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Kt v 1 7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.05</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.11&nbsp;–&nbsp;0.11</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.996</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">pedriatic Kt v 1 2</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.04</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.03</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.11&nbsp;–&nbsp;0.03</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-1.21</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.241</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">pediatric Kt v 1 8</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.02</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.01</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.04&nbsp;–&nbsp;0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-1.89</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.076</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">pediatric nPCR</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.04</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.03</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.01&nbsp;–&nbsp;0.10</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1.75</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.097</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">better fistula</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.18</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.11</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.41&nbsp;–&nbsp;0.04</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-1.73</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.101</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">expected fistula</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.01</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.08</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.15&nbsp;–&nbsp;0.16</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.08</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.935</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">worse fistula</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.03</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.11</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.25&nbsp;–&nbsp;0.19</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.28</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.780</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">long term catheter</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.31</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.07</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.16&nbsp;–&nbsp;0.47</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">4.19</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.001</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">hypercalcemia calcium &gt;<br>
10 2Mg</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.19</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.09</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.37&nbsp;–&nbsp;-0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-2.13</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.048</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">phosphorus &lt; 3 5Mg</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.35</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.48</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.66&nbsp;–&nbsp;1.36</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.73</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.476</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">phosphorus (3 5 - 4 5) Mg</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-1.73</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.46</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-2.71&nbsp;–&nbsp;-0.76</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-3.73</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.002</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">phosphorus (4 6 - 5 5) Mg</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-1.36</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.46</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-2.33&nbsp;–&nbsp;-0.40</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-2.97</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.008</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">phosphorus (5 6 - 7) Mg</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.80</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.44</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-1.72&nbsp;–&nbsp;0.12</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-1.82</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.085</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">phosphorus &gt; 7Mg</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-1.44</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.46</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-2.41&nbsp;–&nbsp;-0.48</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-3.15</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.005</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">better hospitalization</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.08</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.32</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.59&nbsp;–&nbsp;0.76</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.26</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.797</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">expected hospitalization</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.70</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.15</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.38&nbsp;–&nbsp;1.03</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">4.55</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">worse hospitalization</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.52</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.22</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.05&nbsp;–&nbsp;0.98</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">2.34</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.031</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">better hospital<br>
readmission</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.38</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.24</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.13&nbsp;–&nbsp;0.88</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1.55</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.139</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">expected hospital<br>
readmission</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.31</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.13</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.03&nbsp;–&nbsp;0.60</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">2.34</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.031</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">worse hospital<br>
readmission</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.09</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.24</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.41&nbsp;–&nbsp;0.59</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.39</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.704</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">better survival</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.57</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.15</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.88&nbsp;–&nbsp;-0.27</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-3.94</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.001</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">worse survival</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.91</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.14</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-1.20&nbsp;–&nbsp;-0.62</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-6.64</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">incident transplant<br>
waitlist better</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.01</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.13</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.27&nbsp;–&nbsp;0.29</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.09</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.926</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">incident transplant<br>
waitlist expected</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.03</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.04</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.05&nbsp;–&nbsp;0.12</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.82</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.421</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">incident transplant<br>
waitlist worse</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.31</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.12</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.06&nbsp;–&nbsp;0.56</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">2.61</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.018</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">prevalent transplant<br>
waitlist better</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.15</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.11</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.08&nbsp;–&nbsp;0.38</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1.36</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.191</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">prevalent transplant<br>
waitlist expected</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.04</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.10</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.17&nbsp;–&nbsp;0.25</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.41</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.690</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">prevalent transplant<br>
waitlist worse</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.01</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.19</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.39&nbsp;–&nbsp;0.40</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.03</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.975</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Hgb 10g</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.10</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.05</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.20&nbsp;–&nbsp;-0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-2.14</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.046</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Hgb 12g</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.36</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.66</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-1.75&nbsp;–&nbsp;1.04</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.54</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.597</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; color: #10759B; font-weight: bold; border-top: 1px solid;">Observations</td>
<td colspan="5" style="text-align: left; padding: 0.2cm; vertical-align: top; color: #10759B; font-weight: bold; border-top: 1px solid;">56</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; color: #10759B; font-weight: bold;">R<sup>2</sup> / R<sup>2</sup> adjusted</td>
<td colspan="5" style="text-align: left; padding: 0.2cm; vertical-align: top; color: #10759B; font-weight: bold;">1.000 / 1.000</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="pca-implementation" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="pca-implementation"><span class="header-section-number">5.6</span> PCA Implementation</h2>
<section id="svd---singular-value-decomposition" class="level3" data-number="5.6.1">
<h3 data-number="5.6.1" class="anchored" data-anchor-id="svd---singular-value-decomposition"><span class="header-section-number">5.6.1</span> SVD - Singular Value Decomposition</h3>
<p>We will focus on Singular Value Decomposition which is a classic approach for PCA analysis.</p>
<p>Singular Value Decomposition is a factorization technique used in linear algebra to decompose a matrix into three matrices.</p>
<ol type="1">
<li><p><span class="math inline">\(L\)</span>: A matrix whose columns are the left singular vectors of the original matrix.</p></li>
<li><p><span class="math inline">\(D\)</span>: A diagonal matrix whose entries are the singular values of the original matrix.</p></li>
<li><p><span class="math inline">\(R\)</span>: A matrix whose columns are the right singular vectors of the original matrix.</p></li>
</ol>
<p>The SVD is closely related to the eigenvalue decomposition (EVD), which is another factorization technique used in linear algebra. While the EVD can only be applied to square matrices, the SVD can be applied to any matrix, including rectangular matrices. The SVD is also more numerically stable than the EVD, making it a preferred method for many applications.</p>
<ul>
<li>Note: The Spectral Decomposition approach is used with the princomp() function.</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply PCA using prcomp()</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>data_pca <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(train_data_sc, <span class="at">center =</span> <span class="cn">TRUE</span>, <span class="at">scale. =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>pca_summ <span class="ot">&lt;-</span> <span class="fu">summary</span>(data_pca)<span class="sc">$</span>importance</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Transpose the matrix</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>transposed_pca_summ <span class="ot">&lt;-</span> <span class="fu">t</span>(pca_summ)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># table format</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(transposed_pca_summ, <span class="at">caption =</span> <span class="st">"Pricipal Components Analysis"</span>,</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>(<span class="st">"hover"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-paper lightable-hover table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Pricipal Components Analysis</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Standard deviation</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Proportion of Variance</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Cumulative Proportion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">PC1</td>
<td style="text-align: right;">3.8854</td>
<td style="text-align: right;">0.4080</td>
<td style="text-align: right;">0.4080</td>
</tr>
<tr class="even">
<td style="text-align: left;">PC2</td>
<td style="text-align: right;">1.8717</td>
<td style="text-align: right;">0.0947</td>
<td style="text-align: right;">0.5027</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PC3</td>
<td style="text-align: right;">1.8377</td>
<td style="text-align: right;">0.0913</td>
<td style="text-align: right;">0.5940</td>
</tr>
<tr class="even">
<td style="text-align: left;">PC4</td>
<td style="text-align: right;">1.7487</td>
<td style="text-align: right;">0.0826</td>
<td style="text-align: right;">0.6766</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PC5</td>
<td style="text-align: right;">1.4227</td>
<td style="text-align: right;">0.0547</td>
<td style="text-align: right;">0.7313</td>
</tr>
<tr class="even">
<td style="text-align: left;">PC6</td>
<td style="text-align: right;">1.2508</td>
<td style="text-align: right;">0.0423</td>
<td style="text-align: right;">0.7736</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PC7</td>
<td style="text-align: right;">1.1280</td>
<td style="text-align: right;">0.0344</td>
<td style="text-align: right;">0.8080</td>
</tr>
<tr class="even">
<td style="text-align: left;">PC8</td>
<td style="text-align: right;">1.0933</td>
<td style="text-align: right;">0.0323</td>
<td style="text-align: right;">0.8403</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PC9</td>
<td style="text-align: right;">0.9449</td>
<td style="text-align: right;">0.0241</td>
<td style="text-align: right;">0.8644</td>
</tr>
<tr class="even">
<td style="text-align: left;">PC10</td>
<td style="text-align: right;">0.9081</td>
<td style="text-align: right;">0.0223</td>
<td style="text-align: right;">0.8867</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PC11</td>
<td style="text-align: right;">0.8185</td>
<td style="text-align: right;">0.0181</td>
<td style="text-align: right;">0.9048</td>
</tr>
<tr class="even">
<td style="text-align: left;">PC12</td>
<td style="text-align: right;">0.7790</td>
<td style="text-align: right;">0.0164</td>
<td style="text-align: right;">0.9212</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PC13</td>
<td style="text-align: right;">0.6815</td>
<td style="text-align: right;">0.0126</td>
<td style="text-align: right;">0.9338</td>
</tr>
<tr class="even">
<td style="text-align: left;">PC14</td>
<td style="text-align: right;">0.6366</td>
<td style="text-align: right;">0.0110</td>
<td style="text-align: right;">0.9447</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PC15</td>
<td style="text-align: right;">0.5710</td>
<td style="text-align: right;">0.0088</td>
<td style="text-align: right;">0.9535</td>
</tr>
<tr class="even">
<td style="text-align: left;">PC16</td>
<td style="text-align: right;">0.5055</td>
<td style="text-align: right;">0.0069</td>
<td style="text-align: right;">0.9604</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PC17</td>
<td style="text-align: right;">0.5018</td>
<td style="text-align: right;">0.0068</td>
<td style="text-align: right;">0.9673</td>
</tr>
<tr class="even">
<td style="text-align: left;">PC18</td>
<td style="text-align: right;">0.4884</td>
<td style="text-align: right;">0.0064</td>
<td style="text-align: right;">0.9737</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PC19</td>
<td style="text-align: right;">0.4625</td>
<td style="text-align: right;">0.0058</td>
<td style="text-align: right;">0.9795</td>
</tr>
<tr class="even">
<td style="text-align: left;">PC20</td>
<td style="text-align: right;">0.4169</td>
<td style="text-align: right;">0.0047</td>
<td style="text-align: right;">0.9842</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PC21</td>
<td style="text-align: right;">0.3534</td>
<td style="text-align: right;">0.0034</td>
<td style="text-align: right;">0.9876</td>
</tr>
<tr class="even">
<td style="text-align: left;">PC22</td>
<td style="text-align: right;">0.3247</td>
<td style="text-align: right;">0.0029</td>
<td style="text-align: right;">0.9904</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PC23</td>
<td style="text-align: right;">0.2884</td>
<td style="text-align: right;">0.0022</td>
<td style="text-align: right;">0.9926</td>
</tr>
<tr class="even">
<td style="text-align: left;">PC24</td>
<td style="text-align: right;">0.2604</td>
<td style="text-align: right;">0.0018</td>
<td style="text-align: right;">0.9945</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PC25</td>
<td style="text-align: right;">0.2259</td>
<td style="text-align: right;">0.0014</td>
<td style="text-align: right;">0.9959</td>
</tr>
<tr class="even">
<td style="text-align: left;">PC26</td>
<td style="text-align: right;">0.2149</td>
<td style="text-align: right;">0.0013</td>
<td style="text-align: right;">0.9971</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PC27</td>
<td style="text-align: right;">0.1982</td>
<td style="text-align: right;">0.0011</td>
<td style="text-align: right;">0.9982</td>
</tr>
<tr class="even">
<td style="text-align: left;">PC28</td>
<td style="text-align: right;">0.1670</td>
<td style="text-align: right;">0.0008</td>
<td style="text-align: right;">0.9989</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PC29</td>
<td style="text-align: right;">0.1268</td>
<td style="text-align: right;">0.0004</td>
<td style="text-align: right;">0.9994</td>
</tr>
<tr class="even">
<td style="text-align: left;">PC30</td>
<td style="text-align: right;">0.1091</td>
<td style="text-align: right;">0.0003</td>
<td style="text-align: right;">0.9997</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PC31</td>
<td style="text-align: right;">0.0838</td>
<td style="text-align: right;">0.0002</td>
<td style="text-align: right;">0.9999</td>
</tr>
<tr class="even">
<td style="text-align: left;">PC32</td>
<td style="text-align: right;">0.0509</td>
<td style="text-align: right;">0.0001</td>
<td style="text-align: right;">0.9999</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PC33</td>
<td style="text-align: right;">0.0317</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">1.0000</td>
</tr>
<tr class="even">
<td style="text-align: left;">PC34</td>
<td style="text-align: right;">0.0287</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">1.0000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PC35</td>
<td style="text-align: right;">0.0143</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">1.0000</td>
</tr>
<tr class="even">
<td style="text-align: left;">PC36</td>
<td style="text-align: right;">0.0081</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">1.0000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PC37</td>
<td style="text-align: right;">0.0049</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">1.0000</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="pca---elements" class="level3" data-number="5.6.2">
<h3 data-number="5.6.2" class="anchored" data-anchor-id="pca---elements"><span class="header-section-number">5.6.2</span> PCA - Elements</h3>
<ul>
<li><p>The values in `<strong><code>data_pca$x`</code></strong> are the coordinates of each observation in the new principal component space. These coordinates are the scores for each observation along each principal component.</p></li>
<li><p>The eigenvectors of the covariance, or correlation matrix of the data represent the directions of maximum variance, or information in the dataset.</p></li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Principal Component scores vector</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>pc_scores <span class="ot">&lt;-</span> data_pca<span class="sc">$</span>x</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Std Deviation of Components</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>component_sdev <span class="ot">&lt;-</span> data_pca<span class="sc">$</span>sdev</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Eigenvector, or Loadings</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>pc_loadings <span class="ot">&lt;-</span> data_pca<span class="sc">$</span>rotation</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Mean of variables</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>component_mean <span class="ot">&lt;-</span> data_pca<span class="sc">$</span>center </span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Scaling factor of Variables</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>component_scale <span class="ot">&lt;-</span> data_pca<span class="sc">$</span>scale</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="loadings-of-first-two-components" class="level3" data-number="5.6.3">
<h3 data-number="5.6.3" class="anchored" data-anchor-id="loadings-of-first-two-components"><span class="header-section-number">5.6.3</span> Loadings of First Two Components</h3>
<ul>
<li>The loading `data_pca$rotation` are the weights assigned to each original variable for that particular principal component.</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Access the loadings for the first two principal components</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>loadings_first_two_components <span class="ot">&lt;-</span> pc_loadings[, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the loadings for the first two principal components</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co"># print(loadings_first_two_components)</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># table format</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(loadings_first_two_components, </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Loadings of First Two Principal Components"</span>,</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>(<span class="st">"hover"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-paper lightable-hover table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Loadings of First Two Principal Components</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PC1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PC2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">better_transfusion</td>
<td style="text-align: right;">0.0506</td>
<td style="text-align: right;">0.0151</td>
</tr>
<tr class="even">
<td style="text-align: left;">expected_transfusion</td>
<td style="text-align: right;">0.2536</td>
<td style="text-align: right;">-0.0214</td>
</tr>
<tr class="odd">
<td style="text-align: left;">worse_transfusion</td>
<td style="text-align: right;">0.2058</td>
<td style="text-align: right;">-0.1647</td>
</tr>
<tr class="even">
<td style="text-align: left;">better_infection</td>
<td style="text-align: right;">0.2526</td>
<td style="text-align: right;">-0.0073</td>
</tr>
<tr class="odd">
<td style="text-align: left;">expected_infection</td>
<td style="text-align: right;">0.2455</td>
<td style="text-align: right;">-0.0652</td>
</tr>
<tr class="even">
<td style="text-align: left;">worse_infection</td>
<td style="text-align: right;">0.1381</td>
<td style="text-align: right;">0.0637</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Kt_v_1.2</td>
<td style="text-align: right;">0.0031</td>
<td style="text-align: right;">0.0081</td>
</tr>
<tr class="even">
<td style="text-align: left;">Kt_v_1.7</td>
<td style="text-align: right;">-0.0078</td>
<td style="text-align: right;">0.0444</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pedriatic_Kt_v_1.2</td>
<td style="text-align: right;">-0.0636</td>
<td style="text-align: right;">0.0527</td>
</tr>
<tr class="even">
<td style="text-align: left;">pediatric_Kt_v_1.8</td>
<td style="text-align: right;">-0.0139</td>
<td style="text-align: right;">0.0028</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pediatric_nPCR</td>
<td style="text-align: right;">-0.0394</td>
<td style="text-align: right;">0.0768</td>
</tr>
<tr class="even">
<td style="text-align: left;">better_fistula</td>
<td style="text-align: right;">0.1701</td>
<td style="text-align: right;">0.1849</td>
</tr>
<tr class="odd">
<td style="text-align: left;">expected_fistula</td>
<td style="text-align: right;">0.2521</td>
<td style="text-align: right;">-0.0558</td>
</tr>
<tr class="even">
<td style="text-align: left;">worse_fistula</td>
<td style="text-align: right;">0.1932</td>
<td style="text-align: right;">-0.0481</td>
</tr>
<tr class="odd">
<td style="text-align: left;">long_term_catheter</td>
<td style="text-align: right;">-0.0054</td>
<td style="text-align: right;">0.0409</td>
</tr>
<tr class="even">
<td style="text-align: left;">hypercalcemia_calcium &gt; 10.2Mg</td>
<td style="text-align: right;">-0.0276</td>
<td style="text-align: right;">0.1049</td>
</tr>
<tr class="odd">
<td style="text-align: left;">phosphorus &lt; 3.5Mg</td>
<td style="text-align: right;">0.0161</td>
<td style="text-align: right;">0.3759</td>
</tr>
<tr class="even">
<td style="text-align: left;">phosphorus (3.5 - 4.5) Mg</td>
<td style="text-align: right;">0.0420</td>
<td style="text-align: right;">0.4258</td>
</tr>
<tr class="odd">
<td style="text-align: left;">phosphorus (4.6 - 5.5) Mg</td>
<td style="text-align: right;">0.0888</td>
<td style="text-align: right;">0.2665</td>
</tr>
<tr class="even">
<td style="text-align: left;">phosphorus (5.6 - 7) Mg</td>
<td style="text-align: right;">-0.0954</td>
<td style="text-align: right;">-0.3297</td>
</tr>
<tr class="odd">
<td style="text-align: left;">phosphorus &gt; 7Mg</td>
<td style="text-align: right;">-0.0293</td>
<td style="text-align: right;">-0.4400</td>
</tr>
<tr class="even">
<td style="text-align: left;">better_hospitalization</td>
<td style="text-align: right;">0.1555</td>
<td style="text-align: right;">0.0398</td>
</tr>
<tr class="odd">
<td style="text-align: left;">expected_hospitalization</td>
<td style="text-align: right;">0.2535</td>
<td style="text-align: right;">-0.0353</td>
</tr>
<tr class="even">
<td style="text-align: left;">worse_hospitalization</td>
<td style="text-align: right;">0.1863</td>
<td style="text-align: right;">-0.1048</td>
</tr>
<tr class="odd">
<td style="text-align: left;">better_hospital_readmission</td>
<td style="text-align: right;">0.2100</td>
<td style="text-align: right;">-0.0462</td>
</tr>
<tr class="even">
<td style="text-align: left;">expected_hospital_readmission</td>
<td style="text-align: right;">0.2537</td>
<td style="text-align: right;">-0.0414</td>
</tr>
<tr class="odd">
<td style="text-align: left;">worse_hospital_readmission</td>
<td style="text-align: right;">0.2010</td>
<td style="text-align: right;">-0.0432</td>
</tr>
<tr class="even">
<td style="text-align: left;">better_survival</td>
<td style="text-align: right;">0.1523</td>
<td style="text-align: right;">0.1688</td>
</tr>
<tr class="odd">
<td style="text-align: left;">worse_survival</td>
<td style="text-align: right;">0.2288</td>
<td style="text-align: right;">-0.0662</td>
</tr>
<tr class="even">
<td style="text-align: left;">incident_transplant_waitlist_better</td>
<td style="text-align: right;">0.2016</td>
<td style="text-align: right;">0.1513</td>
</tr>
<tr class="odd">
<td style="text-align: left;">incident_transplant_waitlist_expected</td>
<td style="text-align: right;">0.2499</td>
<td style="text-align: right;">-0.0578</td>
</tr>
<tr class="even">
<td style="text-align: left;">incident_transplant_waitlist_worse</td>
<td style="text-align: right;">0.1913</td>
<td style="text-align: right;">-0.0199</td>
</tr>
<tr class="odd">
<td style="text-align: left;">prevalent_transplant_waitlist_better</td>
<td style="text-align: right;">0.1618</td>
<td style="text-align: right;">0.1763</td>
</tr>
<tr class="even">
<td style="text-align: left;">prevalent_transplant_waitlist_expected</td>
<td style="text-align: right;">0.2501</td>
<td style="text-align: right;">-0.0703</td>
</tr>
<tr class="odd">
<td style="text-align: left;">prevalent_transplant_waitlist_worse</td>
<td style="text-align: right;">0.1202</td>
<td style="text-align: right;">-0.2285</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hgb 10g</td>
<td style="text-align: right;">-0.0299</td>
<td style="text-align: right;">-0.0804</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hgb 12g</td>
<td style="text-align: right;">-0.0006</td>
<td style="text-align: right;">0.1765</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="pca---cumulative-variance" class="level3" data-number="5.6.4">
<h3 data-number="5.6.4" class="anchored" data-anchor-id="pca---cumulative-variance"><span class="header-section-number">5.6.4</span> PCA - Cumulative Variance</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Proportion of variance explained by each PC</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>variance_explained <span class="ot">&lt;-</span> component_sdev<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> <span class="fu">sum</span>(component_sdev<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Cumulative proportion of variance explained</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>cumulative_variance_explained <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(variance_explained)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame with an index column</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>cumulative_variance_explained_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">Pincipal_Component =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(cumulative_variance_explained),</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">Cumulative_Variance_Explained =</span> cumulative_variance_explained</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a kable table with an index column</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(cumulative_variance_explained_df, <span class="at">align =</span> <span class="st">"cl"</span>,</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"PCA: Cumulative Variance Explained"</span>,</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>(<span class="st">"hover"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-paper lightable-hover table table-sm table-striped small" data-quarto-postprocess="true">
<caption>PCA: Cumulative Variance Explained</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">Pincipal_Component</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Cumulative_Variance_Explained</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: left;">0.4080</td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: left;">0.5027</td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td style="text-align: left;">0.5940</td>
</tr>
<tr class="even">
<td style="text-align: center;">4</td>
<td style="text-align: left;">0.6766</td>
</tr>
<tr class="odd">
<td style="text-align: center;">5</td>
<td style="text-align: left;">0.7313</td>
</tr>
<tr class="even">
<td style="text-align: center;">6</td>
<td style="text-align: left;">0.7736</td>
</tr>
<tr class="odd">
<td style="text-align: center;">7</td>
<td style="text-align: left;">0.8080</td>
</tr>
<tr class="even">
<td style="text-align: center;">8</td>
<td style="text-align: left;">0.8403</td>
</tr>
<tr class="odd">
<td style="text-align: center;">9</td>
<td style="text-align: left;">0.8644</td>
</tr>
<tr class="even">
<td style="text-align: center;">10</td>
<td style="text-align: left;">0.8867</td>
</tr>
<tr class="odd">
<td style="text-align: center;">11</td>
<td style="text-align: left;">0.9048</td>
</tr>
<tr class="even">
<td style="text-align: center;">12</td>
<td style="text-align: left;">0.9212</td>
</tr>
<tr class="odd">
<td style="text-align: center;">13</td>
<td style="text-align: left;">0.9338</td>
</tr>
<tr class="even">
<td style="text-align: center;">14</td>
<td style="text-align: left;">0.9447</td>
</tr>
<tr class="odd">
<td style="text-align: center;">15</td>
<td style="text-align: left;">0.9535</td>
</tr>
<tr class="even">
<td style="text-align: center;">16</td>
<td style="text-align: left;">0.9604</td>
</tr>
<tr class="odd">
<td style="text-align: center;">17</td>
<td style="text-align: left;">0.9673</td>
</tr>
<tr class="even">
<td style="text-align: center;">18</td>
<td style="text-align: left;">0.9737</td>
</tr>
<tr class="odd">
<td style="text-align: center;">19</td>
<td style="text-align: left;">0.9795</td>
</tr>
<tr class="even">
<td style="text-align: center;">20</td>
<td style="text-align: left;">0.9842</td>
</tr>
<tr class="odd">
<td style="text-align: center;">21</td>
<td style="text-align: left;">0.9876</td>
</tr>
<tr class="even">
<td style="text-align: center;">22</td>
<td style="text-align: left;">0.9904</td>
</tr>
<tr class="odd">
<td style="text-align: center;">23</td>
<td style="text-align: left;">0.9927</td>
</tr>
<tr class="even">
<td style="text-align: center;">24</td>
<td style="text-align: left;">0.9945</td>
</tr>
<tr class="odd">
<td style="text-align: center;">25</td>
<td style="text-align: left;">0.9959</td>
</tr>
<tr class="even">
<td style="text-align: center;">26</td>
<td style="text-align: left;">0.9971</td>
</tr>
<tr class="odd">
<td style="text-align: center;">27</td>
<td style="text-align: left;">0.9982</td>
</tr>
<tr class="even">
<td style="text-align: center;">28</td>
<td style="text-align: left;">0.9989</td>
</tr>
<tr class="odd">
<td style="text-align: center;">29</td>
<td style="text-align: left;">0.9994</td>
</tr>
<tr class="even">
<td style="text-align: center;">30</td>
<td style="text-align: left;">0.9997</td>
</tr>
<tr class="odd">
<td style="text-align: center;">31</td>
<td style="text-align: left;">0.9999</td>
</tr>
<tr class="even">
<td style="text-align: center;">32</td>
<td style="text-align: left;">0.9999</td>
</tr>
<tr class="odd">
<td style="text-align: center;">33</td>
<td style="text-align: left;">1.0000</td>
</tr>
<tr class="even">
<td style="text-align: center;">34</td>
<td style="text-align: left;">1.0000</td>
</tr>
<tr class="odd">
<td style="text-align: center;">35</td>
<td style="text-align: left;">1.0000</td>
</tr>
<tr class="even">
<td style="text-align: center;">36</td>
<td style="text-align: left;">1.0000</td>
</tr>
<tr class="odd">
<td style="text-align: center;">37</td>
<td style="text-align: left;">1.0000</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="pca---number-of-principal-components" class="level3" data-number="5.6.5">
<h3 data-number="5.6.5" class="anchored" data-anchor-id="pca---number-of-principal-components"><span class="header-section-number">5.6.5</span> PCA - Number of Principal Components</h3>
<ul>
<li>We can conclude that 9 Principal Components explain 86% of the variance.</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Retain components that explain a percentage of the variance</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>num_components <span class="ot">&lt;-</span> <span class="fu">which</span>(cumulative_variance_explained <span class="sc">&gt;=</span> <span class="fl">0.86</span>)[<span class="dv">1</span>]</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Select the desired number of principal components</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>selected_pcs <span class="ot">&lt;-</span> pc_scores[, <span class="dv">1</span><span class="sc">:</span>num_components]</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># table format</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(selected_pcs, <span class="at">caption =</span> <span class="st">"Components Explaining 86% Variance"</span>,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>(<span class="st">"hover"</span>, <span class="at">full_width =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-paper lightable-hover table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Components Explaining 86% Variance</caption>
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">PC1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PC2</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PC3</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PC4</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PC5</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PC6</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PC7</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PC8</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PC9</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">-3.1378</td>
<td style="text-align: right;">0.7718</td>
<td style="text-align: right;">-0.7364</td>
<td style="text-align: right;">-0.9222</td>
<td style="text-align: right;">-0.3593</td>
<td style="text-align: right;">0.3854</td>
<td style="text-align: right;">1.7645</td>
<td style="text-align: right;">0.7137</td>
<td style="text-align: right;">-1.2776</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.9109</td>
<td style="text-align: right;">-1.3736</td>
<td style="text-align: right;">-0.8907</td>
<td style="text-align: right;">-0.0460</td>
<td style="text-align: right;">0.0228</td>
<td style="text-align: right;">0.3267</td>
<td style="text-align: right;">1.9095</td>
<td style="text-align: right;">0.3203</td>
<td style="text-align: right;">0.3158</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-1.3650</td>
<td style="text-align: right;">-1.7656</td>
<td style="text-align: right;">-0.1449</td>
<td style="text-align: right;">0.2592</td>
<td style="text-align: right;">-1.2857</td>
<td style="text-align: right;">-0.3762</td>
<td style="text-align: right;">-0.7856</td>
<td style="text-align: right;">-0.9204</td>
<td style="text-align: right;">-1.2626</td>
</tr>
<tr class="even">
<td style="text-align: right;">-3.0594</td>
<td style="text-align: right;">0.3348</td>
<td style="text-align: right;">-0.0141</td>
<td style="text-align: right;">-0.1395</td>
<td style="text-align: right;">0.0920</td>
<td style="text-align: right;">-0.2825</td>
<td style="text-align: right;">-0.1286</td>
<td style="text-align: right;">0.1373</td>
<td style="text-align: right;">0.0780</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-0.1991</td>
<td style="text-align: right;">-0.2073</td>
<td style="text-align: right;">-0.7149</td>
<td style="text-align: right;">-1.3756</td>
<td style="text-align: right;">-1.1993</td>
<td style="text-align: right;">0.0319</td>
<td style="text-align: right;">0.7499</td>
<td style="text-align: right;">0.7160</td>
<td style="text-align: right;">-0.1954</td>
</tr>
<tr class="even">
<td style="text-align: right;">15.2032</td>
<td style="text-align: right;">2.6187</td>
<td style="text-align: right;">-7.7363</td>
<td style="text-align: right;">4.0519</td>
<td style="text-align: right;">-0.8244</td>
<td style="text-align: right;">-2.8218</td>
<td style="text-align: right;">-0.3937</td>
<td style="text-align: right;">0.7540</td>
<td style="text-align: right;">0.1236</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-1.1596</td>
<td style="text-align: right;">1.1216</td>
<td style="text-align: right;">-0.7112</td>
<td style="text-align: right;">-0.6842</td>
<td style="text-align: right;">0.2286</td>
<td style="text-align: right;">-0.3821</td>
<td style="text-align: right;">-0.5148</td>
<td style="text-align: right;">-1.3731</td>
<td style="text-align: right;">0.5560</td>
</tr>
<tr class="even">
<td style="text-align: right;">-1.7567</td>
<td style="text-align: right;">2.4464</td>
<td style="text-align: right;">0.2336</td>
<td style="text-align: right;">-0.7871</td>
<td style="text-align: right;">-0.1098</td>
<td style="text-align: right;">-1.0603</td>
<td style="text-align: right;">-0.1434</td>
<td style="text-align: right;">-1.6411</td>
<td style="text-align: right;">1.1462</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-2.5605</td>
<td style="text-align: right;">1.0785</td>
<td style="text-align: right;">-0.0207</td>
<td style="text-align: right;">-0.0018</td>
<td style="text-align: right;">-0.2474</td>
<td style="text-align: right;">1.1930</td>
<td style="text-align: right;">-0.1234</td>
<td style="text-align: right;">1.6484</td>
<td style="text-align: right;">1.1223</td>
</tr>
<tr class="even">
<td style="text-align: right;">-2.2725</td>
<td style="text-align: right;">0.7670</td>
<td style="text-align: right;">-0.0552</td>
<td style="text-align: right;">-1.0045</td>
<td style="text-align: right;">2.4430</td>
<td style="text-align: right;">-1.8092</td>
<td style="text-align: right;">1.3011</td>
<td style="text-align: right;">0.0402</td>
<td style="text-align: right;">0.7853</td>
</tr>
<tr class="odd">
<td style="text-align: right;">10.2101</td>
<td style="text-align: right;">-3.0951</td>
<td style="text-align: right;">5.5631</td>
<td style="text-align: right;">-2.7079</td>
<td style="text-align: right;">-3.2328</td>
<td style="text-align: right;">-1.4788</td>
<td style="text-align: right;">-1.0195</td>
<td style="text-align: right;">0.3946</td>
<td style="text-align: right;">0.0182</td>
</tr>
<tr class="even">
<td style="text-align: right;">5.1286</td>
<td style="text-align: right;">-1.7705</td>
<td style="text-align: right;">1.7849</td>
<td style="text-align: right;">-0.1628</td>
<td style="text-align: right;">0.5176</td>
<td style="text-align: right;">-0.3672</td>
<td style="text-align: right;">1.2737</td>
<td style="text-align: right;">0.3839</td>
<td style="text-align: right;">-0.1914</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-3.4958</td>
<td style="text-align: right;">-4.4206</td>
<td style="text-align: right;">-3.1425</td>
<td style="text-align: right;">0.0404</td>
<td style="text-align: right;">-0.7928</td>
<td style="text-align: right;">0.4217</td>
<td style="text-align: right;">0.1087</td>
<td style="text-align: right;">-1.1395</td>
<td style="text-align: right;">-1.5791</td>
</tr>
<tr class="even">
<td style="text-align: right;">-1.7134</td>
<td style="text-align: right;">0.8230</td>
<td style="text-align: right;">-1.9663</td>
<td style="text-align: right;">-1.0871</td>
<td style="text-align: right;">0.7505</td>
<td style="text-align: right;">0.4357</td>
<td style="text-align: right;">1.1010</td>
<td style="text-align: right;">0.8853</td>
<td style="text-align: right;">-1.1906</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-1.9511</td>
<td style="text-align: right;">0.9075</td>
<td style="text-align: right;">-0.3459</td>
<td style="text-align: right;">-1.4707</td>
<td style="text-align: right;">-0.7735</td>
<td style="text-align: right;">-0.7810</td>
<td style="text-align: right;">-1.0116</td>
<td style="text-align: right;">-1.4774</td>
<td style="text-align: right;">0.2215</td>
</tr>
<tr class="even">
<td style="text-align: right;">-2.6296</td>
<td style="text-align: right;">0.9149</td>
<td style="text-align: right;">-0.5263</td>
<td style="text-align: right;">-1.3484</td>
<td style="text-align: right;">-0.9348</td>
<td style="text-align: right;">0.5181</td>
<td style="text-align: right;">0.3570</td>
<td style="text-align: right;">0.8863</td>
<td style="text-align: right;">-0.4488</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4.7463</td>
<td style="text-align: right;">0.3146</td>
<td style="text-align: right;">2.3709</td>
<td style="text-align: right;">-0.2528</td>
<td style="text-align: right;">0.8329</td>
<td style="text-align: right;">1.4290</td>
<td style="text-align: right;">-0.8492</td>
<td style="text-align: right;">0.0128</td>
<td style="text-align: right;">-0.0479</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.3868</td>
<td style="text-align: right;">-0.9290</td>
<td style="text-align: right;">0.6870</td>
<td style="text-align: right;">-0.6117</td>
<td style="text-align: right;">1.5374</td>
<td style="text-align: right;">-0.1113</td>
<td style="text-align: right;">0.2265</td>
<td style="text-align: right;">0.7691</td>
<td style="text-align: right;">-0.8385</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-1.6767</td>
<td style="text-align: right;">0.2850</td>
<td style="text-align: right;">-0.9842</td>
<td style="text-align: right;">-1.8133</td>
<td style="text-align: right;">-0.8136</td>
<td style="text-align: right;">0.7518</td>
<td style="text-align: right;">0.8450</td>
<td style="text-align: right;">-0.2605</td>
<td style="text-align: right;">0.7893</td>
</tr>
<tr class="even">
<td style="text-align: right;">-0.7345</td>
<td style="text-align: right;">-1.3222</td>
<td style="text-align: right;">0.3700</td>
<td style="text-align: right;">-0.8448</td>
<td style="text-align: right;">2.0553</td>
<td style="text-align: right;">-1.6018</td>
<td style="text-align: right;">0.7571</td>
<td style="text-align: right;">-1.1866</td>
<td style="text-align: right;">1.6751</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.9393</td>
<td style="text-align: right;">-0.6999</td>
<td style="text-align: right;">-0.1399</td>
<td style="text-align: right;">-0.5978</td>
<td style="text-align: right;">-0.0203</td>
<td style="text-align: right;">-0.0046</td>
<td style="text-align: right;">1.3170</td>
<td style="text-align: right;">0.4944</td>
<td style="text-align: right;">0.4746</td>
</tr>
<tr class="even">
<td style="text-align: right;">-0.8326</td>
<td style="text-align: right;">1.5874</td>
<td style="text-align: right;">-0.7312</td>
<td style="text-align: right;">0.2910</td>
<td style="text-align: right;">0.1199</td>
<td style="text-align: right;">1.1100</td>
<td style="text-align: right;">-1.6455</td>
<td style="text-align: right;">1.1312</td>
<td style="text-align: right;">-0.0448</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.8725</td>
<td style="text-align: right;">1.0451</td>
<td style="text-align: right;">0.2775</td>
<td style="text-align: right;">0.2175</td>
<td style="text-align: right;">-0.6226</td>
<td style="text-align: right;">0.5429</td>
<td style="text-align: right;">-0.2118</td>
<td style="text-align: right;">0.9699</td>
<td style="text-align: right;">1.6165</td>
</tr>
<tr class="even">
<td style="text-align: right;">-2.7730</td>
<td style="text-align: right;">0.5328</td>
<td style="text-align: right;">-0.3857</td>
<td style="text-align: right;">-0.9341</td>
<td style="text-align: right;">0.8943</td>
<td style="text-align: right;">-2.7237</td>
<td style="text-align: right;">-0.4738</td>
<td style="text-align: right;">-2.6266</td>
<td style="text-align: right;">1.1451</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2.0146</td>
<td style="text-align: right;">0.0014</td>
<td style="text-align: right;">0.6403</td>
<td style="text-align: right;">-0.6929</td>
<td style="text-align: right;">-0.1677</td>
<td style="text-align: right;">0.4555</td>
<td style="text-align: right;">-0.3840</td>
<td style="text-align: right;">0.2754</td>
<td style="text-align: right;">1.0045</td>
</tr>
<tr class="even">
<td style="text-align: right;">-1.1376</td>
<td style="text-align: right;">0.6676</td>
<td style="text-align: right;">0.0612</td>
<td style="text-align: right;">0.2444</td>
<td style="text-align: right;">-0.4465</td>
<td style="text-align: right;">0.9265</td>
<td style="text-align: right;">-0.6966</td>
<td style="text-align: right;">0.9414</td>
<td style="text-align: right;">0.1757</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.1256</td>
<td style="text-align: right;">-0.9951</td>
<td style="text-align: right;">1.1503</td>
<td style="text-align: right;">-0.4897</td>
<td style="text-align: right;">0.7108</td>
<td style="text-align: right;">1.3854</td>
<td style="text-align: right;">0.0279</td>
<td style="text-align: right;">-0.3615</td>
<td style="text-align: right;">-0.4521</td>
</tr>
<tr class="even">
<td style="text-align: right;">-3.6486</td>
<td style="text-align: right;">-5.1247</td>
<td style="text-align: right;">0.0491</td>
<td style="text-align: right;">6.3322</td>
<td style="text-align: right;">-1.4438</td>
<td style="text-align: right;">1.4726</td>
<td style="text-align: right;">-0.7719</td>
<td style="text-align: right;">-0.9060</td>
<td style="text-align: right;">2.9209</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-0.3307</td>
<td style="text-align: right;">0.2793</td>
<td style="text-align: right;">-0.0985</td>
<td style="text-align: right;">-0.3388</td>
<td style="text-align: right;">-0.5950</td>
<td style="text-align: right;">-0.5761</td>
<td style="text-align: right;">2.0137</td>
<td style="text-align: right;">0.0524</td>
<td style="text-align: right;">0.9485</td>
</tr>
<tr class="even">
<td style="text-align: right;">-3.1386</td>
<td style="text-align: right;">-2.4847</td>
<td style="text-align: right;">-2.0044</td>
<td style="text-align: right;">1.0661</td>
<td style="text-align: right;">-0.5877</td>
<td style="text-align: right;">-0.0292</td>
<td style="text-align: right;">-0.7689</td>
<td style="text-align: right;">-0.0432</td>
<td style="text-align: right;">-0.9302</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1.8304</td>
<td style="text-align: right;">-0.8659</td>
<td style="text-align: right;">-0.6292</td>
<td style="text-align: right;">-0.2888</td>
<td style="text-align: right;">-0.3585</td>
<td style="text-align: right;">1.1522</td>
<td style="text-align: right;">1.4099</td>
<td style="text-align: right;">-0.2387</td>
<td style="text-align: right;">0.1117</td>
</tr>
<tr class="even">
<td style="text-align: right;">-2.6300</td>
<td style="text-align: right;">1.8820</td>
<td style="text-align: right;">1.4790</td>
<td style="text-align: right;">1.5197</td>
<td style="text-align: right;">0.1484</td>
<td style="text-align: right;">0.9943</td>
<td style="text-align: right;">1.0138</td>
<td style="text-align: right;">1.7547</td>
<td style="text-align: right;">-0.2904</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-1.9654</td>
<td style="text-align: right;">1.4437</td>
<td style="text-align: right;">0.4239</td>
<td style="text-align: right;">-1.4217</td>
<td style="text-align: right;">0.3452</td>
<td style="text-align: right;">0.1489</td>
<td style="text-align: right;">0.2267</td>
<td style="text-align: right;">0.8292</td>
<td style="text-align: right;">0.0537</td>
</tr>
<tr class="even">
<td style="text-align: right;">-2.9434</td>
<td style="text-align: right;">-0.4453</td>
<td style="text-align: right;">-0.1869</td>
<td style="text-align: right;">0.0501</td>
<td style="text-align: right;">-0.3471</td>
<td style="text-align: right;">-0.3884</td>
<td style="text-align: right;">-1.8441</td>
<td style="text-align: right;">0.4520</td>
<td style="text-align: right;">0.3853</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1.9335</td>
<td style="text-align: right;">4.2274</td>
<td style="text-align: right;">-1.5429</td>
<td style="text-align: right;">-0.8354</td>
<td style="text-align: right;">-0.5412</td>
<td style="text-align: right;">2.3739</td>
<td style="text-align: right;">-0.2919</td>
<td style="text-align: right;">0.2478</td>
<td style="text-align: right;">0.0526</td>
</tr>
<tr class="even">
<td style="text-align: right;">-1.4611</td>
<td style="text-align: right;">0.5551</td>
<td style="text-align: right;">-1.4467</td>
<td style="text-align: right;">-0.2732</td>
<td style="text-align: right;">0.4168</td>
<td style="text-align: right;">-0.3335</td>
<td style="text-align: right;">0.0306</td>
<td style="text-align: right;">1.0760</td>
<td style="text-align: right;">-0.1292</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-1.6820</td>
<td style="text-align: right;">-0.9253</td>
<td style="text-align: right;">-0.3177</td>
<td style="text-align: right;">-0.2737</td>
<td style="text-align: right;">-0.7852</td>
<td style="text-align: right;">0.2036</td>
<td style="text-align: right;">-0.4687</td>
<td style="text-align: right;">0.5302</td>
<td style="text-align: right;">-0.4388</td>
</tr>
<tr class="even">
<td style="text-align: right;">6.7595</td>
<td style="text-align: right;">3.6388</td>
<td style="text-align: right;">1.0562</td>
<td style="text-align: right;">2.3514</td>
<td style="text-align: right;">2.4970</td>
<td style="text-align: right;">3.4372</td>
<td style="text-align: right;">-1.4276</td>
<td style="text-align: right;">-3.6075</td>
<td style="text-align: right;">-1.6018</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3.4507</td>
<td style="text-align: right;">-1.1824</td>
<td style="text-align: right;">2.5699</td>
<td style="text-align: right;">-1.1129</td>
<td style="text-align: right;">-0.0546</td>
<td style="text-align: right;">1.4361</td>
<td style="text-align: right;">-0.6591</td>
<td style="text-align: right;">-1.0345</td>
<td style="text-align: right;">-0.1605</td>
</tr>
<tr class="even">
<td style="text-align: right;">-1.0984</td>
<td style="text-align: right;">-1.5241</td>
<td style="text-align: right;">-0.5320</td>
<td style="text-align: right;">-0.4777</td>
<td style="text-align: right;">-0.9995</td>
<td style="text-align: right;">-0.8030</td>
<td style="text-align: right;">-0.1950</td>
<td style="text-align: right;">-1.6084</td>
<td style="text-align: right;">-0.6964</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-1.9193</td>
<td style="text-align: right;">-0.0165</td>
<td style="text-align: right;">-1.0806</td>
<td style="text-align: right;">-0.5872</td>
<td style="text-align: right;">-0.6324</td>
<td style="text-align: right;">-0.2014</td>
<td style="text-align: right;">-1.3158</td>
<td style="text-align: right;">-1.3027</td>
<td style="text-align: right;">0.1718</td>
</tr>
<tr class="even">
<td style="text-align: right;">3.4962</td>
<td style="text-align: right;">1.5199</td>
<td style="text-align: right;">1.3109</td>
<td style="text-align: right;">-0.3007</td>
<td style="text-align: right;">2.5985</td>
<td style="text-align: right;">1.0499</td>
<td style="text-align: right;">-0.2313</td>
<td style="text-align: right;">-0.0969</td>
<td style="text-align: right;">0.8464</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-0.2522</td>
<td style="text-align: right;">3.0718</td>
<td style="text-align: right;">2.1407</td>
<td style="text-align: right;">-1.9255</td>
<td style="text-align: right;">-2.2719</td>
<td style="text-align: right;">-3.4093</td>
<td style="text-align: right;">-2.1544</td>
<td style="text-align: right;">0.2271</td>
<td style="text-align: right;">-1.2587</td>
</tr>
<tr class="even">
<td style="text-align: right;">-3.0135</td>
<td style="text-align: right;">-0.6858</td>
<td style="text-align: right;">-1.1712</td>
<td style="text-align: right;">-0.8551</td>
<td style="text-align: right;">-0.4428</td>
<td style="text-align: right;">0.8391</td>
<td style="text-align: right;">-1.0039</td>
<td style="text-align: right;">0.4085</td>
<td style="text-align: right;">-0.1121</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.3392</td>
<td style="text-align: right;">-0.5133</td>
<td style="text-align: right;">0.0391</td>
<td style="text-align: right;">-0.1766</td>
<td style="text-align: right;">-0.5924</td>
<td style="text-align: right;">1.0593</td>
<td style="text-align: right;">1.1663</td>
<td style="text-align: right;">0.5207</td>
<td style="text-align: right;">-0.3248</td>
</tr>
<tr class="even">
<td style="text-align: right;">-2.1136</td>
<td style="text-align: right;">2.6100</td>
<td style="text-align: right;">0.5330</td>
<td style="text-align: right;">-0.8478</td>
<td style="text-align: right;">0.0752</td>
<td style="text-align: right;">0.1416</td>
<td style="text-align: right;">1.0927</td>
<td style="text-align: right;">-0.3588</td>
<td style="text-align: right;">1.3478</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1.3707</td>
<td style="text-align: right;">-2.9104</td>
<td style="text-align: right;">1.0848</td>
<td style="text-align: right;">1.3163</td>
<td style="text-align: right;">6.1381</td>
<td style="text-align: right;">-2.1436</td>
<td style="text-align: right;">0.9717</td>
<td style="text-align: right;">0.1946</td>
<td style="text-align: right;">-1.2873</td>
</tr>
<tr class="even">
<td style="text-align: right;">13.0708</td>
<td style="text-align: right;">-2.7257</td>
<td style="text-align: right;">0.4257</td>
<td style="text-align: right;">-0.4752</td>
<td style="text-align: right;">-0.7834</td>
<td style="text-align: right;">0.5789</td>
<td style="text-align: right;">0.9620</td>
<td style="text-align: right;">0.5196</td>
<td style="text-align: right;">-0.2282</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-2.6465</td>
<td style="text-align: right;">-0.3807</td>
<td style="text-align: right;">-0.6944</td>
<td style="text-align: right;">1.0365</td>
<td style="text-align: right;">-0.9202</td>
<td style="text-align: right;">0.4536</td>
<td style="text-align: right;">0.2146</td>
<td style="text-align: right;">-0.6048</td>
<td style="text-align: right;">-0.7532</td>
</tr>
<tr class="even">
<td style="text-align: right;">1.7505</td>
<td style="text-align: right;">-0.1798</td>
<td style="text-align: right;">-0.2689</td>
<td style="text-align: right;">-0.3411</td>
<td style="text-align: right;">0.6075</td>
<td style="text-align: right;">-0.7767</td>
<td style="text-align: right;">-0.0058</td>
<td style="text-align: right;">0.2781</td>
<td style="text-align: right;">1.5233</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-3.3725</td>
<td style="text-align: right;">3.5365</td>
<td style="text-align: right;">5.3271</td>
<td style="text-align: right;">7.7627</td>
<td style="text-align: right;">-2.3163</td>
<td style="text-align: right;">-1.7961</td>
<td style="text-align: right;">2.1724</td>
<td style="text-align: right;">-0.1875</td>
<td style="text-align: right;">-1.1131</td>
</tr>
<tr class="even">
<td style="text-align: right;">-3.1242</td>
<td style="text-align: right;">-1.0424</td>
<td style="text-align: right;">0.8044</td>
<td style="text-align: right;">2.1331</td>
<td style="text-align: right;">2.8559</td>
<td style="text-align: right;">-0.9073</td>
<td style="text-align: right;">-3.9502</td>
<td style="text-align: right;">3.0657</td>
<td style="text-align: right;">-0.2529</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-1.0177</td>
<td style="text-align: right;">-1.6718</td>
<td style="text-align: right;">-1.8286</td>
<td style="text-align: right;">0.3950</td>
<td style="text-align: right;">-0.4653</td>
<td style="text-align: right;">0.8616</td>
<td style="text-align: right;">-0.2457</td>
<td style="text-align: right;">-0.1711</td>
<td style="text-align: right;">-0.3817</td>
</tr>
<tr class="even">
<td style="text-align: right;">-0.3396</td>
<td style="text-align: right;">0.7505</td>
<td style="text-align: right;">0.9596</td>
<td style="text-align: right;">-0.3014</td>
<td style="text-align: right;">0.5726</td>
<td style="text-align: right;">0.0189</td>
<td style="text-align: right;">-0.0433</td>
<td style="text-align: right;">0.0637</td>
<td style="text-align: right;">0.6271</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-2.2360</td>
<td style="text-align: right;">-0.6559</td>
<td style="text-align: right;">0.7765</td>
<td style="text-align: right;">0.2318</td>
<td style="text-align: right;">-0.2785</td>
<td style="text-align: right;">-0.3448</td>
<td style="text-align: right;">-0.0371</td>
<td style="text-align: right;">0.7968</td>
<td style="text-align: right;">-1.0752</td>
</tr>
<tr class="even">
<td style="text-align: right;">-3.1511</td>
<td style="text-align: right;">0.1807</td>
<td style="text-align: right;">-1.0702</td>
<td style="text-align: right;">-0.4912</td>
<td style="text-align: right;">-0.2143</td>
<td style="text-align: right;">-0.6257</td>
<td style="text-align: right;">0.7831</td>
<td style="text-align: right;">-1.3442</td>
<td style="text-align: right;">-1.6736</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
</section>
<section id="visualization" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="visualization"><span class="header-section-number">5.7</span> Visualization</h2>
<section id="scree-plot---cumulative-variance-explained" class="level3" data-number="5.7.1">
<h3 data-number="5.7.1" class="anchored" data-anchor-id="scree-plot---cumulative-variance-explained"><span class="header-section-number">5.7.1</span> Scree Plot - Cumulative Variance Explained</h3>
<ul>
<li><p>PC1 explains 40.8% variance.</p></li>
<li><p>PC2 explains 9.5% variance.</p></li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_eig</span>(data_pca, <span class="at">addlabels =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="biplot" class="level3" data-number="5.7.2">
<h3 data-number="5.7.2" class="anchored" data-anchor-id="biplot"><span class="header-section-number">5.7.2</span> Biplot</h3>
<ul>
<li><p>The correlation between a variable and a principal component (PC) is used as the coordinates of the variable on the PC. The representation of variables differs from the plot of the observations: The observations are represented by their projections, but the variables are represented by their correlations <span class="citation" data-cites="abdi2010principal"><a href="references.html#ref-abdi2010principal" role="doc-biblioref">[2]</a></span>.</p></li>
<li><p>PC1 is represented in black which displays the longest distance of its projection.</p></li>
<li><p>PC2 is represented in blue which displays a shorter distance as expected.</p></li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_pca_biplot</span>(data_pca, </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">geom =</span> <span class="fu">c</span>(<span class="st">"point"</span>, <span class="st">"arrow"</span>),</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">geom.var =</span> <span class="st">"arrow"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="correlation-circle" class="level3" data-number="5.7.3">
<h3 data-number="5.7.3" class="anchored" data-anchor-id="correlation-circle"><span class="header-section-number">5.7.3</span> Correlation Circle</h3>
<p>The plot below is also known as variable correlation plots. It shows the relationships between all variables. It can be interpreted as follow:</p>
<ul>
<li><p>Positively correlated variables are grouped together.</p></li>
<li><p>Negatively correlated variables are positioned on opposite sides of the plot origin (opposed quadrants).</p></li>
<li><p>The distance between variables and the origin measures the quality of the variables on the factor map. Variables that are away from the origin are well represented on the factor map.</p></li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Control variable colors using their contributions</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_pca_var</span>(data_pca, <span class="at">col.var =</span> <span class="st">"contrib"</span>,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>   <span class="at">gradient.cols =</span> <span class="fu">c</span>(<span class="st">"white"</span>, <span class="st">"blue"</span>, <span class="st">"red"</span>),</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>   <span class="at">geom.var =</span> <span class="st">"arrow"</span>,</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>   <span class="at">ggtheme =</span> <span class="fu">theme_minimal</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="variable-contribution" class="level3" data-number="5.7.4">
<h3 data-number="5.7.4" class="anchored" data-anchor-id="variable-contribution"><span class="header-section-number">5.7.4</span> Variable Contribution</h3>
<p>Top variable contribution for the first two principal components.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Contributions of variables to PC1</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>pc2_contribution <span class="ot">&lt;-</span> <span class="fu">fviz_contrib</span>(data_pca, <span class="at">choice =</span> <span class="st">"var"</span>, <span class="at">axes =</span> <span class="dv">1</span>, <span class="at">top =</span> <span class="dv">20</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Modify the theme to rotate X-axis labels to 90 degrees</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>pc2_contribution <span class="sc">+</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>),</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)  <span class="co"># horizontal justification</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Contribution of Variables to PC1"</span>,</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Percentage Contribution"</span>,</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"PC1 explains 40.8% variance"</span>) <span class="sc">+</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">scale =</span> <span class="dv">1</span>,</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>                                                     <span class="at">accuracy =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Contributions of variables to PC2</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>pc2_contribution <span class="ot">&lt;-</span> <span class="fu">fviz_contrib</span>(data_pca, <span class="at">choice =</span> <span class="st">"var"</span>, <span class="at">axes =</span> <span class="dv">2</span>, <span class="at">top =</span> <span class="dv">12</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Modify the theme to rotate X-axis labels to 90 degrees</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>pc2_contribution <span class="sc">+</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>),</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)  <span class="co"># horizontal justification</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Contribution of Variables to PC2"</span>,</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Percentage Contribution"</span>,</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"PC2 explains 9.5% variance"</span>) <span class="sc">+</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">scale =</span> <span class="dv">1</span>,</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>                                                     <span class="at">accuracy =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-24-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="model-building" class="level2" data-number="5.8">
<h2 data-number="5.8" class="anchored" data-anchor-id="model-building"><span class="header-section-number">5.8</span> Model Building</h2>
<section id="data-splitting-into-training-test-set" class="level3" data-number="5.8.1">
<h3 data-number="5.8.1" class="anchored" data-anchor-id="data-splitting-into-training-test-set"><span class="header-section-number">5.8.1</span> Data Splitting into Training &amp; Test set</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reproducible random sampling</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(my_seed)  </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create Target y-variable for the training set</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> train_data<span class="sc">$</span>expected_survival  </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Split the data into training and test sets </span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>split <span class="ot">&lt;-</span> <span class="fu">sample.split</span>(y, <span class="at">SplitRatio =</span> <span class="fl">0.7</span>) </span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>training_set <span class="ot">&lt;-</span> <span class="fu">subset</span>(train_data, split <span class="sc">==</span> <span class="cn">TRUE</span>) </span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>test_set <span class="ot">&lt;-</span> <span class="fu">subset</span>(train_data, split <span class="sc">==</span> <span class="cn">FALSE</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="feature-scaling-standardization" class="level3" data-number="5.8.2">
<h3 data-number="5.8.2" class="anchored" data-anchor-id="feature-scaling-standardization"><span class="header-section-number">5.8.2</span> Feature Scaling: Standardization</h3>
<ul>
<li>Standardization ensures all features are on the same scale, and this method is less sensitive to outliers.</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Feature Scaling: Standardization</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform centering and scaling on the training and test sets</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>sc <span class="ot">&lt;-</span> <span class="fu">preProcess</span>(training_set[, <span class="sc">-</span>target_index], </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">method =</span> <span class="fu">c</span>(<span class="st">"center"</span>, <span class="st">"scale"</span>))</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>training_set[, <span class="sc">-</span>target_index] <span class="ot">&lt;-</span> <span class="fu">predict</span>(</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  sc, training_set[, <span class="sc">-</span>target_index])</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>test_set[, <span class="sc">-</span>target_index] <span class="ot">&lt;-</span> <span class="fu">predict</span>(sc, test_set[, <span class="sc">-</span>target_index])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="applying-pca-to-training-test-sets" class="level3" data-number="5.8.3">
<h3 data-number="5.8.3" class="anchored" data-anchor-id="applying-pca-to-training-test-sets"><span class="header-section-number">5.8.3</span> Applying PCA to Training &amp; Test sets</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform Principal Component Analysis (PCA) preprocessing on the training data</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>pca <span class="ot">&lt;-</span> <span class="fu">preProcess</span>(training_set[, <span class="sc">-</span>target_index], </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">method =</span> <span class="st">'pca'</span>, <span class="at">pcaComp =</span> <span class="dv">8</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply PCA transformation to original training set</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>training_set <span class="ot">&lt;-</span> <span class="fu">predict</span>(pca, training_set)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Reorder columns, moving the dependent feature index to the end</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>training_set <span class="ot">&lt;-</span> training_set[<span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">9</span>, <span class="dv">1</span>)]</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply PCA transformation to original test set</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>test_set <span class="ot">&lt;-</span> <span class="fu">predict</span>(pca, test_set)</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Reorder columns, moving the dependent feature index to the end</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>test_set <span class="ot">&lt;-</span> test_set[<span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">9</span>, <span class="dv">1</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="pca-full-model-8-principal-components" class="level2" data-number="5.9">
<h2 data-number="5.9" class="anchored" data-anchor-id="pca-full-model-8-principal-components"><span class="header-section-number">5.9</span> PCA Full Model: 8 Principal Components</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reproducible random sampling</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(my_seed)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a multiple linear regression model</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>pca_full_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(expected_survival <span class="sc">~</span> ., <span class="at">data =</span> training_set)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Print a summary of the regression model</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="fu">tab_model</span>(pca_full_model, <span class="at">title =</span> <span class="st">"8 Principal Components Regression"</span>,</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">string.p=</span><span class="st">"P-value"</span>, <span class="at">string.stat =</span> <span class="st">"T-score"</span>,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">string.se =</span> <span class="st">"Std. Error"</span>,</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">string.resp =</span> <span class="st">"Response"</span>,</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">string.ci =</span> <span class="st">"Conf Int."</span>,</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>          <span class="at">show.se=</span>T, <span class="at">show.stat =</span> T,</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">CSS =</span> <span class="fu">list</span>(</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">css.depvarhead =</span> <span class="st">'font-weight: bold; text-align: left;'</span>,</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>             <span class="at">css.summary =</span> <span class="st">'color: #10759B; font-weight: bold;'</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>           ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>8 Principal Components Regression</caption>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: italic; font-weight: normal; padding: 0.2cm; border-bottom: 1px solid black;">&nbsp;</td>
<td colspan="5" data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: italic; font-weight: normal; padding: 0.2cm; border-bottom: 1px solid black;">expected_survival</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; border-bottom: 1px solid black;">Predictors</td>
<td style="text-align: left; font-weight: bold; border-bottom: 1px solid black;">Estimates</td>
<td style="text-align: left; font-weight: bold; border-bottom: 1px solid black;">Std. Error</td>
<td style="text-align: left; font-weight: bold; border-bottom: 1px solid black;">Conf Int.</td>
<td style="text-align: left; font-weight: bold; border-bottom: 1px solid black;">T-score</td>
<td style="text-align: left; font-weight: bold; border-bottom: 1px solid black;">P-value</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">(Intercept)</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">97.05</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">2.84</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">91.25&nbsp;–&nbsp;102.85</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">34.19</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">PC1</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">29.40</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.71</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">27.95&nbsp;–&nbsp;30.86</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">41.22</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">PC2</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">4.59</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1.33</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1.87&nbsp;–&nbsp;7.31</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">3.44</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.002</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">PC3</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-1.11</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1.64</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-4.46&nbsp;–&nbsp;2.24</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.68</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.504</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">PC4</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">4.99</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1.75</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1.42&nbsp;–&nbsp;8.56</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">2.85</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.008</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">PC5</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-3.27</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">2.25</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-7.86&nbsp;–&nbsp;1.31</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-1.46</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.156</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">PC6</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">6.98</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">2.44</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">2.01&nbsp;–&nbsp;11.95</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">2.87</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.008</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">PC7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-6.60</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">2.56</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-11.83&nbsp;–&nbsp;-1.37</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-2.58</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.015</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">PC8</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">3.80</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">2.82</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-1.96&nbsp;–&nbsp;9.56</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1.35</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.188</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; color: #10759B; font-weight: bold; border-top: 1px solid;">Observations</td>
<td colspan="5" style="text-align: left; padding: 0.2cm; vertical-align: top; color: #10759B; font-weight: bold; border-top: 1px solid;">39</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; color: #10759B; font-weight: bold;">R<sup>2</sup> / R<sup>2</sup> adjusted</td>
<td colspan="5" style="text-align: left; padding: 0.2cm; vertical-align: top; color: #10759B; font-weight: bold;">0.983 / 0.979</td>
</tr>
</tbody>
</table>


</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate PRESS</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># cat("PRESS: ", PRESS(pca_full_model), "\n")</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>PRESS_8pc <span class="ot">&lt;-</span> <span class="fu">PRESS</span>(pca_full_model)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate predicted R^2</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co"># cat("Predicted R^2: ", pred_r_squared(pca_full_model), "\n")</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>R2_8pcs <span class="ot">&lt;-</span> <span class="fu">pred_r_squared</span>(pca_full_model)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>predict_8pc <span class="ot">&lt;-</span> <span class="fu">cbind</span>(PRESS_8pc, R2_8pcs)</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Print PRESS, predicted R^2</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co"># table format</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(predict_8pc, <span class="at">caption =</span> <span class="st">"8 Principal Components Prediction Metrics"</span>,</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>(<span class="st">"hover"</span>, <span class="at">full_width =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-paper lightable-hover table table-sm table-striped small" data-quarto-postprocess="true">
<caption>8 Principal Components Prediction Metrics</caption>
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">PRESS_8pc</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">R2_8pcs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">31662.39</td>
<td style="text-align: right;">0.943</td>
</tr>
</tbody>
</table>


</div>
</div>
<section id="visualization-of-uncorrelated-pca-matrix" class="level3" data-number="5.9.1">
<h3 data-number="5.9.1" class="anchored" data-anchor-id="visualization-of-uncorrelated-pca-matrix"><span class="header-section-number">5.9.1</span> Visualization of Uncorrelated PCA Matrix</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visual of Principal Components un-correlation</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>corr_matrix <span class="ot">&lt;-</span> <span class="fu">cor</span>(training_set)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcorrplot</span>(corr_matrix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="pca-2-principal-components" class="level2" data-number="5.10">
<h2 data-number="5.10" class="anchored" data-anchor-id="pca-2-principal-components"><span class="header-section-number">5.10</span> PCA: 2 Principal Components</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a subset with 2 principal components</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>significant_pcs <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">9</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>train_pca <span class="ot">&lt;-</span> training_set[, significant_pcs]</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>test_pca <span class="ot">&lt;-</span> test_set[, significant_pcs]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reproducible random sampling</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(my_seed)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a multiple linear regression model</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>reg_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(expected_survival <span class="sc">~</span> ., </span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">data =</span> train_pca)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Print a summary of the regression model</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tab_model</span>(reg_model, <span class="at">title =</span> <span class="st">"2 Principal Components Regression"</span>,</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">string.p=</span><span class="st">"P-value"</span>, <span class="at">string.stat =</span> <span class="st">"T-score"</span>,</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">string.se =</span> <span class="st">"Std. Error"</span>,</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">string.resp =</span> <span class="st">"Response"</span>,</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>          <span class="at">string.ci =</span> <span class="st">"Conf Int."</span>,</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">show.se=</span>T, <span class="at">show.stat =</span> T,</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>          <span class="at">CSS =</span> <span class="fu">list</span>(</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>             <span class="at">css.depvarhead =</span> <span class="st">'font-weight: bold; text-align: left;'</span>,</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>             <span class="at">css.summary =</span> <span class="st">'color: #10759B; font-weight: bold;'</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>           ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>2 Principal Components Regression</caption>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: italic; font-weight: normal; padding: 0.2cm; border-bottom: 1px solid black;">&nbsp;</td>
<td colspan="5" data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: italic; font-weight: normal; padding: 0.2cm; border-bottom: 1px solid black;">expected_survival</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; border-bottom: 1px solid black;">Predictors</td>
<td style="text-align: left; font-weight: bold; border-bottom: 1px solid black;">Estimates</td>
<td style="text-align: left; font-weight: bold; border-bottom: 1px solid black;">Std. Error</td>
<td style="text-align: left; font-weight: bold; border-bottom: 1px solid black;">Conf Int.</td>
<td style="text-align: left; font-weight: bold; border-bottom: 1px solid black;">T-score</td>
<td style="text-align: left; font-weight: bold; border-bottom: 1px solid black;">P-value</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">(Intercept)</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">97.05</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">3.58</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">89.78&nbsp;–&nbsp;104.32</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">27.07</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">PC1</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">29.40</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.90</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">27.58&nbsp;–&nbsp;31.23</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">32.64</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">PC2</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">4.59</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1.68</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1.18&nbsp;–&nbsp;8.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">2.73</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.010</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; color: #10759B; font-weight: bold; border-top: 1px solid;">Observations</td>
<td colspan="5" style="text-align: left; padding: 0.2cm; vertical-align: top; color: #10759B; font-weight: bold; border-top: 1px solid;">39</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; color: #10759B; font-weight: bold;">R<sup>2</sup> / R<sup>2</sup> adjusted</td>
<td colspan="5" style="text-align: left; padding: 0.2cm; vertical-align: top; color: #10759B; font-weight: bold;">0.968 / 0.966</td>
</tr>
</tbody>
</table>


</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate PRESS</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># cat("PRESS: ", PRESS(reg_model), "\n")</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>PRESS_2pc <span class="ot">&lt;-</span> <span class="fu">PRESS</span>(reg_model)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate predicted R^2</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co"># cat("Predicted R^2: ", pred_r_squared(reg_model), "\n")</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>R2_2pc <span class="ot">&lt;-</span> <span class="fu">pred_r_squared</span>(reg_model)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Print 2PC prediction results</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>predict_2pc <span class="ot">&lt;-</span> <span class="fu">cbind</span>(PRESS_2pc, R2_2pc)</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="co"># table format</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(predict_2pc, <span class="at">caption =</span> <span class="st">"2 Principal Components Prediction Metrics"</span>,</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>(<span class="st">"hover"</span>, <span class="at">full_width =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-paper lightable-hover table table-sm table-striped small" data-quarto-postprocess="true">
<caption>2 Principal Components Prediction Metrics</caption>
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">PRESS_2pc</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">R2_2pc</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">25699.6</td>
<td style="text-align: right;">0.9538</td>
</tr>
</tbody>
</table>


</div>
</div>
<section id="principal-components-regression" class="level3" data-number="5.10.1">
<h3 data-number="5.10.1" class="anchored" data-anchor-id="principal-components-regression"><span class="header-section-number">5.10.1</span> <strong>Principal Components Regression</strong></h3>
<ul>
<li>PCA is used to calculate principal components that can then be used in&nbsp;principal components regression. This type of regression is often used when&nbsp;multicollinearity&nbsp;exists between predictors in a data set.</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reproducible random sampling</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(my_seed)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> train_pca<span class="sc">$</span>expected_survival</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co"># fit PCR</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>pcr_model <span class="ot">&lt;-</span> <span class="fu">pcr</span>(y <span class="sc">~</span> PC1<span class="sc">+</span>PC2, <span class="at">data=</span>train_pca, <span class="at">validation=</span><span class="st">"CV"</span>)</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(pcr_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Principal component regression, fitted with the singular value decomposition algorithm.
Cross-validated using 10 random segments.
Call:
pcr(formula = y ~ PC1 + PC2, data = train_pca, validation = "CV")</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># table format</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(pcr_model<span class="sc">$</span>residuals, <span class="at">caption =</span> <span class="st">"PCA Residuals"</span>,</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>(<span class="st">"hover"</span>, <span class="at">full_width =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-paper lightable-hover table table-sm table-striped small" data-quarto-postprocess="true">
<caption>PCA Residuals</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">y.1 comps</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">y.2 comps</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: right;">0.1506</td>
<td style="text-align: right;">-0.7094</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: right;">14.8415</td>
<td style="text-align: right;">8.7438</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: right;">-9.9048</td>
<td style="text-align: right;">-15.6499</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: right;">-11.9950</td>
<td style="text-align: right;">-10.5934</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: right;">14.5581</td>
<td style="text-align: right;">7.4172</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: right;">10.5628</td>
<td style="text-align: right;">-4.1105</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: right;">-1.1997</td>
<td style="text-align: right;">-1.8621</td>
</tr>
<tr class="even">
<td style="text-align: left;">8</td>
<td style="text-align: right;">-13.8770</td>
<td style="text-align: right;">-8.7908</td>
</tr>
<tr class="odd">
<td style="text-align: left;">10</td>
<td style="text-align: right;">-10.6707</td>
<td style="text-align: right;">-7.5478</td>
</tr>
<tr class="even">
<td style="text-align: left;">13</td>
<td style="text-align: right;">15.9325</td>
<td style="text-align: right;">-6.8066</td>
</tr>
<tr class="odd">
<td style="text-align: left;">14</td>
<td style="text-align: right;">-28.4995</td>
<td style="text-align: right;">-32.2191</td>
</tr>
<tr class="even">
<td style="text-align: left;">15</td>
<td style="text-align: right;">13.7912</td>
<td style="text-align: right;">10.2807</td>
</tr>
<tr class="odd">
<td style="text-align: left;">19</td>
<td style="text-align: right;">2.2654</td>
<td style="text-align: right;">-4.9708</td>
</tr>
<tr class="even">
<td style="text-align: left;">20</td>
<td style="text-align: right;">20.7004</td>
<td style="text-align: right;">18.6124</td>
</tr>
<tr class="odd">
<td style="text-align: left;">22</td>
<td style="text-align: right;">-22.7913</td>
<td style="text-align: right;">-18.7054</td>
</tr>
<tr class="even">
<td style="text-align: left;">24</td>
<td style="text-align: right;">0.3036</td>
<td style="text-align: right;">-1.8158</td>
</tr>
<tr class="odd">
<td style="text-align: left;">27</td>
<td style="text-align: right;">15.1056</td>
<td style="text-align: right;">16.6785</td>
</tr>
<tr class="even">
<td style="text-align: left;">29</td>
<td style="text-align: right;">-18.5425</td>
<td style="text-align: right;">-18.3174</td>
</tr>
<tr class="odd">
<td style="text-align: left;">30</td>
<td style="text-align: right;">7.9759</td>
<td style="text-align: right;">-3.5721</td>
</tr>
<tr class="even">
<td style="text-align: left;">31</td>
<td style="text-align: right;">61.8084</td>
<td style="text-align: right;">55.7883</td>
</tr>
<tr class="odd">
<td style="text-align: left;">32</td>
<td style="text-align: right;">-20.9204</td>
<td style="text-align: right;">-5.0790</td>
</tr>
<tr class="even">
<td style="text-align: left;">33</td>
<td style="text-align: right;">-12.8183</td>
<td style="text-align: right;">-9.2901</td>
</tr>
<tr class="odd">
<td style="text-align: left;">34</td>
<td style="text-align: right;">1.6594</td>
<td style="text-align: right;">-0.6758</td>
</tr>
<tr class="even">
<td style="text-align: left;">35</td>
<td style="text-align: right;">-17.3032</td>
<td style="text-align: right;">-12.3010</td>
</tr>
<tr class="odd">
<td style="text-align: left;">36</td>
<td style="text-align: right;">-17.2435</td>
<td style="text-align: right;">-19.9354</td>
</tr>
<tr class="even">
<td style="text-align: left;">37</td>
<td style="text-align: right;">-4.2019</td>
<td style="text-align: right;">-9.4719</td>
</tr>
<tr class="odd">
<td style="text-align: left;">38</td>
<td style="text-align: right;">-90.8171</td>
<td style="text-align: right;">-71.1562</td>
</tr>
<tr class="even">
<td style="text-align: left;">39</td>
<td style="text-align: right;">57.1428</td>
<td style="text-align: right;">59.6527</td>
</tr>
<tr class="odd">
<td style="text-align: left;">41</td>
<td style="text-align: right;">10.0589</td>
<td style="text-align: right;">4.0816</td>
</tr>
<tr class="even">
<td style="text-align: left;">42</td>
<td style="text-align: right;">18.5721</td>
<td style="text-align: right;">29.7334</td>
</tr>
<tr class="odd">
<td style="text-align: left;">44</td>
<td style="text-align: right;">3.2955</td>
<td style="text-align: right;">-4.0228</td>
</tr>
<tr class="even">
<td style="text-align: left;">45</td>
<td style="text-align: right;">8.2807</td>
<td style="text-align: right;">7.3105</td>
</tr>
<tr class="odd">
<td style="text-align: left;">46</td>
<td style="text-align: right;">-17.5634</td>
<td style="text-align: right;">-10.1654</td>
</tr>
<tr class="even">
<td style="text-align: left;">49</td>
<td style="text-align: right;">14.4348</td>
<td style="text-align: right;">13.0494</td>
</tr>
<tr class="odd">
<td style="text-align: left;">50</td>
<td style="text-align: right;">5.5387</td>
<td style="text-align: right;">3.5868</td>
</tr>
<tr class="even">
<td style="text-align: left;">51</td>
<td style="text-align: right;">-9.4323</td>
<td style="text-align: right;">29.4206</td>
</tr>
<tr class="odd">
<td style="text-align: left;">54</td>
<td style="text-align: right;">10.5787</td>
<td style="text-align: right;">15.4795</td>
</tr>
<tr class="even">
<td style="text-align: left;">55</td>
<td style="text-align: right;">-1.1796</td>
<td style="text-align: right;">1.1198</td>
</tr>
<tr class="odd">
<td style="text-align: left;">56</td>
<td style="text-align: right;">1.4025</td>
<td style="text-align: right;">-3.1866</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="pca-cross-validation-model" class="level3" data-number="5.10.2">
<h3 data-number="5.10.2" class="anchored" data-anchor-id="pca-cross-validation-model"><span class="header-section-number">5.10.2</span> PCA: Cross-Validation Model</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reproducible random sampling</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(my_seed)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Cross-validation with n folds</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>k_10 <span class="ot">&lt;-</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">"cv"</span>, <span class="at">number =</span> <span class="dv">10</span>)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co"># training the model </span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>model_cv <span class="ot">&lt;-</span> <span class="fu">train</span>(expected_survival <span class="sc">~</span> ., </span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">data =</span> train_pca,</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">method =</span> <span class="st">"lm"</span>,</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>                  <span class="at">trControl =</span> k_10)</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Print Model Performance</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(model_cv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Linear Regression 

39 samples
 2 predictor

No pre-processing
Resampling: Cross-Validated (10 fold) 
Summary of sample sizes: 35, 35, 35, 35, 35, 35, ... 
Resampling results:

  RMSE     Rsquared   MAE     
  21.7825  0.9761582  16.14872

Tuning parameter 'intercept' was held constant at a value of TRUE</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Metrics</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>cv_results <span class="ot">=</span> model_cv<span class="sc">$</span>results</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(cv_results, <span class="at">caption =</span> <span class="st">"PCA: Cross-Validation Metrics"</span>,</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>(<span class="st">"hover"</span>, <span class="at">full_width =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-paper lightable-hover table table-sm table-striped small" data-quarto-postprocess="true">
<caption>PCA: Cross-Validation Metrics</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">intercept</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">RMSE</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Rsquared</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MAE</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">RMSESD</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">RsquaredSD</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MAESD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">21.7825</td>
<td style="text-align: right;">0.9762</td>
<td style="text-align: right;">16.1487</td>
<td style="text-align: right;">14.0372</td>
<td style="text-align: right;">0.0377</td>
<td style="text-align: right;">8.5694</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
</section>
<section id="predictions" class="level2" data-number="5.11">
<h2 data-number="5.11" class="anchored" data-anchor-id="predictions"><span class="header-section-number">5.11</span> Predictions</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the index position of the target feature</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>pred_target_index <span class="ot">&lt;-</span> <span class="fu">grep</span>(target_name, </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">colnames</span>(test_pca))</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co">#cat("Target Feature Index =", pred_target_index)</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create Predicted Target Feature (y-test) </span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>y_test <span class="ot">&lt;-</span> test_pca[pred_target_index]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Predictions using the Cross-Validation model</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>y_pred <span class="ot">=</span> <span class="fu">predict</span>(model_cv, <span class="at">newdata =</span> test_pca[, <span class="sc">-</span>pred_target_index])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prediction Results from y_predictions</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>y_pred <span class="ot">&lt;-</span> <span class="fu">round</span>(y_pred, <span class="at">digits =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transform y_test from data frame to numeric</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>y_test <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">unlist</span>(y_test))</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>prediction_comparison <span class="ot">&lt;-</span> <span class="fu">cbind</span>(y_pred, y_test)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="co"># table format</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(prediction_comparison) <span class="sc">%&gt;%</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>(<span class="st">"hover"</span>, <span class="at">full_width =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-paper lightable-hover table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">y_pred</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">y_test</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">9</td>
<td style="text-align: right;">35</td>
<td style="text-align: right;">16</td>
</tr>
<tr class="even">
<td style="text-align: left;">11</td>
<td style="text-align: right;">520</td>
<td style="text-align: right;">442</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12</td>
<td style="text-align: right;">310</td>
<td style="text-align: right;">318</td>
</tr>
<tr class="even">
<td style="text-align: left;">16</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">17</td>
<td style="text-align: right;">298</td>
<td style="text-align: right;">284</td>
</tr>
<tr class="even">
<td style="text-align: left;">18</td>
<td style="text-align: right;">125</td>
<td style="text-align: right;">152</td>
</tr>
<tr class="odd">
<td style="text-align: left;">21</td>
<td style="text-align: right;">159</td>
<td style="text-align: right;">160</td>
</tr>
<tr class="even">
<td style="text-align: left;">23</td>
<td style="text-align: right;">149</td>
<td style="text-align: right;">141</td>
</tr>
<tr class="odd">
<td style="text-align: left;">25</td>
<td style="text-align: right;">191</td>
<td style="text-align: right;">197</td>
</tr>
<tr class="even">
<td style="text-align: left;">26</td>
<td style="text-align: right;">81</td>
<td style="text-align: right;">95</td>
</tr>
<tr class="odd">
<td style="text-align: left;">28</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">40</td>
<td style="text-align: right;">86</td>
<td style="text-align: right;">78</td>
</tr>
<tr class="odd">
<td style="text-align: left;">43</td>
<td style="text-align: right;">113</td>
<td style="text-align: right;">38</td>
</tr>
<tr class="even">
<td style="text-align: left;">47</td>
<td style="text-align: right;">182</td>
<td style="text-align: right;">171</td>
</tr>
<tr class="odd">
<td style="text-align: left;">48</td>
<td style="text-align: right;">585</td>
<td style="text-align: right;">657</td>
</tr>
<tr class="even">
<td style="text-align: left;">52</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">53</td>
<td style="text-align: right;">88</td>
<td style="text-align: right;">92</td>
</tr>
</tbody>
</table>


</div>
</div>
<section id="prediction-metrics" class="level3" data-number="5.11.1">
<h3 data-number="5.11.1" class="anchored" data-anchor-id="prediction-metrics"><span class="header-section-number">5.11.1</span> Prediction Metrics</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate Mean Absolute Error (MAE)</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>MAE_value <span class="ot">&lt;-</span> <span class="fu">mae</span>(y_pred, y_test)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co">#cat("MAE =", mae_value)</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate MSE</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>MSE_predict <span class="ot">&lt;-</span> <span class="fu">mean</span>((y_pred <span class="sc">-</span> y_test)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="co">#cat("\nMSE =", mse_predict)</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate RMSE</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>RMSE_predict <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="fu">mean</span>((y_pred <span class="sc">-</span> y_test)<span class="sc">^</span><span class="dv">2</span>))</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="co">#cat("\nRMSE =", rmse_predict)</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate R-squared (R^2)</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>predicted_R2 <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">-</span> <span class="fu">sum</span>((y_test <span class="sc">-</span> y_pred)<span class="sc">^</span><span class="dv">2</span>) <span class="sc">/</span> </span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>((y_test <span class="sc">-</span> <span class="fu">mean</span>(y_test))<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a><span class="co"># cat("\nPredicted R^2 =", predicted_r2)</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>prediction_metrics_df <span class="ot">&lt;-</span> <span class="fu">cbind</span>(MAE_value, MSE_predict,</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>                               RMSE_predict, predicted_R2)</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a><span class="co"># table format</span></span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(prediction_metrics_df, <span class="at">digits =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>(<span class="st">"hover"</span>, <span class="at">full_width =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-paper lightable-hover table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">MAE_value</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MSE_predict</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">RMSE_predict</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">predicted_R2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">21.8824</td>
<td style="text-align: right;">1142.235</td>
<td style="text-align: right;">33.797</td>
<td style="text-align: right;">0.96</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
</section>
<section id="training-conclusion" class="level2" data-number="5.12">
<h2 data-number="5.12" class="anchored" data-anchor-id="training-conclusion"><span class="header-section-number">5.12</span> Training Conclusion</h2>
<p>In conclusion, this project has demonstrated the effectiveness of Principal Component Analysis (PCA) in dimension reduction with the following key points:</p>
<ul>
<li><p>PCA was able to reduce from 37 features down to just 2 principal components.</p></li>
<li><p>The best score of R^2 = 97.61% was from the Linear Regression with Cross-validation model.</p></li>
<li><p>The predicted R^2 = 96%</p></li>
<li><p>The average deviation between the predicted values, and observed values for ‘Expected Survival’ is RMSE = 33.8.</p></li>
<li><p>The model has not been exposed to unseen data with a large amount of observations to asses its robustness, and reliability.</p></li>
</ul>


<div id="refs" class="references csl-bib-body" role="list" style="display: none">
<div id="ref-chumney2012pcaefa" class="csl-entry" role="listitem">
<div class="csl-left-margin">[1] </div><div class="csl-right-inline">F. Chumney, <span>“PCA, EFA, CFA,”</span> pp. 2–3, 6, Sep., 2012, Available: <a href="https://www.westga.edu/academics/research/vrc/assets/docs/PCA-EFA-CFA_EssayChumney_09282012.pdf">https://www.westga.edu/academics/research/vrc/assets/docs/PCA-EFA-CFA_EssayChumney_09282012.pdf</a></div>
</div>
<div id="ref-abdi2010principal" class="csl-entry" role="listitem">
<div class="csl-left-margin">[2] </div><div class="csl-right-inline">H. Abdi and L. J. Williams, <span>“Principal component analysis,”</span> <em>WIREs Computational Statistics</em>, vol. 2, no. 4, pp. 433–459, 2010, doi: <a href="https://doi.org/10.1002/wics.101">https://doi.org/10.1002/wics.101</a>. Available: <a href="https://wires.onlinelibrary.wiley.com/doi/abs/10.1002/wics.101">https://wires.onlinelibrary.wiley.com/doi/abs/10.1002/wics.101</a></div>
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./dataset.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Dataset</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./results.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Results</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>